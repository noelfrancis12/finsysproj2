{% extends 'app1/base.html' %}
{% block body %}
    {% load static %}

    <!--<h1>Taxes</h1>-->


    <script>

window.onload=function(){  
    var GSTNO=document.getElementById('gst_no').value;
              var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

              if (!expr.test(GSTNO)) 
              {
                document.getElementById('gst_no').style.display="none"
                document.getElementById('gst_no_label').style.display="none"
             }
           else{
            document.getElementById('gst_no').style.display="block"
            document.getElementById('gst_no_label').style.display="block"


              }
              var x="{{inv_id}}";
              var y="{{recinv_id}}";
              if (x) {
                                $('#inv_no').append($('<option>', {
                            value:0+" "+"{{inv_id}}",
                            text:'Invoice'+" "+"{{inv_id}}"
                        }));

                        }
                        else{
                            $('#inv_no').append($('<option>', {
                            value:3+" "+'invoice_not_available',
                            text: 'invoice not available'
                        }));
                        }

                        if (y) {
                                $('#inv_no').append($('<option>', {
                            value:1+" "+'{{recinv_id}}',
                            text:'Re.Invoice'+" "+"{{recinv_id}}"
                        }));

                        }
                        else{
                            $('#inv_no').append($('<option>', {
                            value:3+" "+'Re:invoice_not_available',
                            text: 'recuring invoice not available'
                        }));
                        }
                            

}   


    </script>
    

    <form action="{% url 'editcreditfun' pcrd.screditid %}" method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        <div class="page-content">
            <!--breadcrumb-->
            <div class="card radius-15">
                <div class="card-body">
                    <div class="card-title">
                        <center><h3 class="mb-0" id="invnumb">EDIT CREDIT NOTE</h3></center>
                    </div>
                    <hr/>
                </div>
            </div>
            <!--end breadcrumb-->
            <div class="card radius-15" style="background-color: #243e54;">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-md-5 mt-3">
                                    <label for="validationCustom02">Customer</label>
                                    <div class="d-flex">
                                        <select name="customer" id="customer" class="custom-select">
                                            <option selected value="{{pcrd.customer}}">{{cust.title}} {{cust.firstname}} {{cust.lastname}}</option>
                                            {% for v in vndr %}
                                            <option value="{{ v.customerid }} {{ v.firstname }} {{ v.lastname }}">{{ v.title }} {{ v.firstname }} {{ v.lastname }}</option>
                                            {% endfor %}
                                        </select>
                                        <a class="btn btn-outline-secondary ml-1" role="button" data-target="#customercreation" data-toggle="modal">+</a>
                                    </div>
                                </div>
                                <div class="col-md-5 mt-3">
                                    <label>Email</label>&nbsp;
                                    <input type="text" id="cred_email" name="email" value="{{pcrd.email}}" placeholder='Email' class="form-control">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5 mt-3">
                                    <label for="validationCustom02">Billing address</label>
                                    <textarea class="form-control" name="address" rows="5" id="mailaddr">{{pcrd.address}} </textarea>
                                    <input style="display: none;" type="text" id="scred" value="{{pcrd.screditid}}">
                                </div>
                                
                                <div class="col-md-5 mt-3">
                                    <label for="validationCustom02">Credit Note Date</label>
                                    <input type="date" class="form-control" value="{{pcrd.creditdate | date:'Y-m-d'}}" name="creditdate" id="date1">
                                    
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5 mt-3">
                                    <label for="validationCustom02">Gst Treatemnt</label>
                                    <input type="text" value="{{cust.gsttype}}" class="form-control" name="gst_treat" id="gst_treat">
                                </div>
                                <div class="col-md-5 mt-3" >
                                    <label for="validationCustom02" id="gst_no_label" style="display: none;">GST No</label>
                                    <input type="text" value="{{cust.gstin}}" class="form-control" name="gst_no" id="gst_no" style="display: none;">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5 mt-3">
                                    <label>Place of supply</label>&nbsp;
                                    <select type="text" class="form-control" id="plosu" name="supply"  onchange="state(this)">

                                        
                                        <option value="{{pcrd.supply}}" selected> {{pcrd.supply}}</option>
                                        <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                                        <option value="Andhra Predhesh">Andhra Predhesh</option>
                                        <option value="Arunachal Predesh">Arunachal Predesh</option>
                                        <option value="Assam">Assam</option>
                                        <option value="Bihar">Bihar</option>
                                        <option value="Chandigarh">Chandigarh</option>
                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                        <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                        <option value="Damn anad Diu">Damn anad Diu</option>
                                        <option value="Delhi">Delhi</option>
                                        <option value="Goa">Goa</option>
                                        <option value="Gujarat">Gujarat</option>
                                        <option value="Haryana">Haryana</option>
                                        <option value="Himachal Predesh">Himachal Predesh</option>
                                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                        <option value="Jharkhand">Jharkhand</option>
                                        <option value="Karnataka">Karnataka</option>
                                        <option value="Kerala">Kerala</option>
                                        <option value="Ladakh">Ladakh</option>
                                        <option value="Lakshadweep">Lakshadweep</option>
                                        <option value="Madhya Predesh">Madhya Predesh</option>
                                        <option value="Maharashtra">Maharashtra</option>
                                        <option value="Manipur">Manipur</option>
                                        <option value="Meghalaya">Meghalaya</option>
                                        <option value="Mizoram">Mizoram</option>
                                        <option value="Nagaland">Nagaland</option>
                                        <option value="Odisha">Odisha</option>
                                        <option value="Puducherry">Puducherry</option>
                                        <option value="Punjab">Punjab</option>
                                        <option value="Rajasthan">Rajasthan</option>
                                        <option value="Sikkim">Sikkim</option>
                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                        <option value="Telangana">Telangana</option>
                                        <option value="Tripura">Tripura</option>
                                        <option value="Uttar Predesh">Uttar Predesh</option>
                                        <option value="Uttarakhand">Uttarakhand</option>
                                        <option value="West Bengal">West Bengal</option>
                                        <option value="Other Territory">Other Territory</option>
                                    </select>
                                </div>
                                <div class="col-md-5 mt-3">
                                    <label for="validationCustom02">Invoice Number</label>
                                    <select name="billno" id="inv_no" class="form-control">
                                        <option value="{{billno2}} {{billno1}}" selected >{{msssg}} {{billno1}}</option>

                                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row" style="margin-top: 20%">
                                <div class="col-md-4"></div>
                                <div class="col-md-6"><label style="font-size: 20px;">CREDIT AMOUNT</label></div>
                                <div class="col-md-4"></div>
                            </div>
                            <div class="row">
                                <div class="col-md-4"></div>
                                <div class="col-md-8">
                                    <input type="text" name="creditamount" value="{{pcrd.grandtotal}}" id="baldue" placeholder='0.00' class="form-control"
                                    readonly style="font-size: 50px; background-color: #243e54; border: 0px; color: white;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12">
                            <div class="row">
                                <div class="col-md-3 mt-3">
                                    {% if pcrd.payment_method == 'no_option' %}
                                    <label for="validationCustom02">Payment Method</label>
                                    <!-- <input type="number" class="form-control" style="width: 110%;" name="referenceNumber" id="referenceNumber" value="{{next_id}}" readonly> -->
                                    <select name="select_payment" id="select_payment" style="width: 110%;" onclick="show_fields()"  class="form-control">
                                        <option value="no_option">select</option>
                                        <option value="Cash">Cash</option>
                                        <option value="Cheque">Cheque</option>
                                        <option value="UPI">UPI</option>
                                        {% for i in banks%}
                                        <option value="{{ i.bankname }}">{{ i.bankname }}</option>
                                        {% endfor %}
                                    </select>
                                    {% else %}
                                    <label for="validationCustom02">Payment Method</label>
                                    <!-- <input type="number" class="form-control" style="width: 110%;" name="referenceNumber" id="referenceNumber" value="{{next_id}}" readonly> -->
                                    <select name="select_payment" id="select_payment" style="width: 110%;" onclick="show_fields()"  class="form-control">
                                        <option value="{{pcrd.payment_method}}" selected>{{pcrd.payment_method}}</option>
                                        <option value="no_option">select</option>
                                        <option value="Cash">Cash</option>
                                        <option value="Cheque">Cheque</option>
                                        <option value="UPI">UPI</option>
                                        {% for i in banks%}
                                        <option value="{{ i.bankname }}">{{ i.bankname }}</option>
                                        {% endfor %}
                                    </select>
                                    {% endif %}
                                </div>
                                
                                    {% if pcrd.payment_method != 'no_option' and pcrd.payment_method != 'Cash' and pcrd.payment_method != 'UPI' and pcrd.payment_method != 'Cheque' %}
                                <div class="col-md-3 mt-3" >
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no" value="{{pcrd.acc_no}}" name="acc_no" style="margin-left: 11%;width: 112%;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;display: none;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;display: none;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="upi_id" id="upi_id" >
                                </div>
                                    {% elif pcrd.payment_method == 'no_option' %}
                                    <div class="col-md-3 mt-3" >
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;display: none;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no"  name="acc_no" style="margin-left: 11%;width: 112%;display: none;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;display: none;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;display: none;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="upi_id" id="upi_id" >
                                </div>
                                    {% elif pcrd.payment_method == 'Cash' %}
                                    <div class="col-md-3 mt-3" >
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;display: none;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no" value="" name="acc_no" style="margin-left: 11%;width: 112%;display: none;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;display: none;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;display: none;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="upi_id" id="upi_id" >
                                </div>
                                    {% elif pcrd.payment_method == 'Cheque' %}
                                    <div class="col-md-3 mt-3" >
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;display: none;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no" value="" name="acc_no" style="margin-left: 11%;width: 112%;display: none;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;" value="{{pcrd.cheque_no}}" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;display: none;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="upi_id" id="upi_id" >
                                </div>
                                    {% elif pcrd.payment_method == 'UPI' %}
                                    <div class="col-md-3 mt-3" > 
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;display: none;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no" value="" name="acc_no" style="margin-left: 11%;width: 112%;display: none;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;display: none;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;" value="{{pcrd.upi_id}}" name="upi_id" id="upi_id" >
                                </div>
                                    {% else %}
                                    <div class="col-md-3 mt-3" >
                                    <label for="validationCustom02" id="acc_no_label"  style="margin-left: 11%;display: none;" >Ac/Number</label>
                                    <input type="text" class="form-control" id="acc_no" value="" name="acc_no" style="margin-left: 11%;width: 112%;display: none;" >
                                    <label for="validationCustom02" id="cheque_no_label" style="margin-left: 11%;display: none;" >Cheque Number</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="cheque_no" id="cheque_no" >
                                    <label for="validationCustom02" id="upi_id_label" style="margin-left: 11%;display: none;" name="credit_note_no">UPI Id</label>
                                    <input type="text" class="form-control" style="margin-left: 11%;width: 112%;display: none;" name="upi_id" id="upi_id" >
                                </div>
                                    {% endif %}
                               
                                
                            </div>
                        </div>
                    </div>
                    <hr style="margin-top: 25px;">
                
                    <div class="row">
                        <div class="col-md-12 mt-3">
                            <label style="font-size: 30px;">Item Details</label>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12 mt-3">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover" id="tab_logic">
                                    <thead>
                                    <tr>
                                        <th class="text-center">#</th>
                                        <th class="text-center">Item</th>
                                        <th class="text-center">HSN</th>
                                        <th class="text-center">Quantity</th>
                                        <th class="text-center">Price</th>
                                        <th class="text-center">Tax (%)</th>
                                        <th class="text-center">Discount</th>
                                        <th class="text-center">Total</th>
                                        
                                    </tr>
                                    </thead>
                                    <tbody id="items-table-body">
                                    {% for pro in pcrd1 %}
                                    <tr id='addr0{{forloop.counter}}'>
                                        <td class="nnum">{{forloop.counter}}
                                            <input type="text"  name='id[]' value="{{ pro.id }}" hidden>
                                        </td>
                                        <td style="width: 20%;">
                                            <div class="d-flex">
                                                <select name='items[]' id="product{{forloop.counter}}" class="form-control product">
                                                    <option value="{{ pro.items }}">{{ pro.items }}</option>
                                                    {% for i in item %}
                                                        <option value="{{ i.name }}">
                                                            {{ i.name }}
                                                        </option>
                                                    {% endfor %}
                                                </select>
                                                <a class="btn btn-outline-secondary ml-1" role="button" data-target="#newitem" data-toggle="modal">+</a> 
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" name='hsn[]' id="hsn{{forloop.counter}}" value="{{pro.hsn}}" placeholder='HSN'
                                            class="form-control hsn"/>
                                        </td>
                                        <td>
                                            <input  type="number" style="display: none;" value="{{pro.rem_qty}}" class="stock_quantity" name="stock_quantity[]" id="stock_qty{{forloop.counter}}" >
                                            <input type="number" style="display: none;" value="{{pro.stock}}" class="avail_stock" name="avail_stock[]" id="avail_stock{{forloop.counter}}">
                                            <input type="number"  name='quantity[]' value="{{pro.quantity}}"  style="margin-top: 21px;" placeholder='Enter Qty' id="qty{{forloop.counter}}" class="form-control qty" step=0 min=0>
                                                <div class="d-flex"><span>Available Qty :</span> <label id="qtyspan{{forloop.counter}}"  class=''>{{pro.stock}}</label></div>
                                            

                                        </td>
                                        <td>
                                            <input type="text" name='price[]' id="unit{{forloop.counter}}" placeholder='Enter Unit Price' value="{{pro.price}}"
                                            class="form-control price" step="0.00" min="0"/>
                                        </td>
                                        <td style="width:15%;">
                                            <input hidden value="{{cmp1.state}}" id="cmpstate">
                                            <!-- <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex"> -->

                                            <select name='tax1[]' id="tax1{{forloop.counter}}" class="form-control intra_tax d-none">
                                                <option selected value="{{pro.tax}}">{{pro.tax}}% GST</option>
                                                <option value=28 >28.0% GST</option>
                                                <option value=18 >18.0% GST</option>
                                                <option value=12  >12.0% GST</option>
                                                 <option value=5  >05.0% GST</option>
                                                <option value=3  >03.0% GST</option>
                                                 <option value=0  >0.0% GST</option>
                                            </select>
                                            <select name='tax2[]' id="tax2{{forloop.counter}}" class="form-control inter_tax d-none">
                                                <option selected value="{{pro.tax}}" >{{pro.tax}}% IGST ({{pro.tax}}%)</option>
                                                <option value=28 >28.0% IGST</option>
                                                <option value=18 >18.0% IGST</option>
                                                <option value=12  >12.0% IGST</option>
                                                 <option value=5  >05.0% IGST</option>
                                                <option value=3  >03.0% IGST</option>
                                                 <option value=0  >0.0% IGST</option>
                                            </select>
                                        </td>

                                        <td style="display: none;">
                                            <input type="text" name='taxamount1' value="{{pro.tax}}" id="taxamount{{forloop.counter}}" class="form-control taxamount"/>
                                        </td>
                                        <td>
                                            <input type="number" name='discount[]' placeholder='Enter Discount' id="disc{{forloop.counter}}" value="{{pro.discount|default:0}}" class="form-control disc" step=0 min=0>
                                         </td>
                                        <td>
                                            <input type="number" name='total[]' id="total{{forloop.counter}}" value="{{pro.total}}"  placeholder='0.00' class="form-control total"/>
                                        </td>
                                        <td>
                                            <!-- <button type="button" id="{{forloop.counter}}" class="btn  font-weight-bold clone_row fa fa-clone px-2 my-1 py-1" title="Clone Row" style="background-color:rgb(88, 107, 143);"></button><br> -->
                                            <button type="button" id="{{forloop.counter}}" class="btn btn-danger remove_row px-2 py-1 mx-1 fa fa-close" title="Remove Row"> </button>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    </tbody>
                                    <tr>
                                        <td style="border: none;"><a class="btn btn-outline-secondary ml-1" title="Add Row" role="button" id="addrow">+</a></td>
                                    </tr>
                                    <label for="" id="item_label" ></label>    <input style="display: none;" type="number" name="stock_quantity_outer" id="stock_qty_outer" >
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <textarea class="form-control"  id="note" name="note" placeholder="Note" style="height: 190px;" >{{pcrd.description}}</textarea>
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-5 table-responsive-md mt-3" id="tab_logic_total" style="background-color:rgba(0,0,0,.4); border: 1px solid rgba(128, 128, 128, 0.6);">
                            <div class="p-3">
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label class="text-center">Sub Total</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" step="any" name='subtotal' placeholder=0 value="{{pcrd.subtotal}}"
                                        class="form-control" id="sub_total">
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0" id="igst1">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">IGST</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='igst' value="{{pcrd.taxamount}}"  step="any" id="igst" 
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0" style="display: none;" id="cgst1">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">CGST</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='cgst' step="any" id="cgst" placeholder=0 value="{{cgst}}"
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0" style="display: none;" id="sgst1">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">SGST</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='sgst' step="any" id="sgst" placeholder=0 value="{{sgst}}"
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Tax Amount</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" step="any" name='taxamount' value="{{pcrd.taxamount}}" id="tax_amount" placeholder='0.00' 
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
          
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Shipping Charge</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" step="any" name='ship' id="ship" placeholder='0.00' 
                                        class="form-control"  value="{{pcrd.shipping_charge}}"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Adjustment</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" step="any" name='adj' id="adj" placeholder='0.00' 
                                        class="form-control"  value="{{pcrd.adjustment}}"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Grand Total</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='grandtotal' id="grandtotal"  readonly value="{{pcrd.grandtotal}}"
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Paid</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='paid' id="paid" value="0.00" 
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                                <div class="row container-fluid p-2 m-0">
                                    <div class="col-sm-4 mt-2"><label for="a" class="text-center">Balance</label></div>
                                    <div class="col-sm-1 mt-2">:</div>
                                    <div class="col-sm-7 mt-2"><input type="number" name='balance' value="{{pcrd.balance}}" id="balance" placeholder='0.00' readonly 
                                        class="form-control"/>
                                    </div>
                                    <div class="col-sm-4 m-0 p-0"></div>
                                </div>
                            </div>
                            <!-- <div class="table-responsive">
                                <table class="table table-bordered" >
                                    <tbody>
                                    <tr>
                                        <th class="text-center">Sub Total</th>
                                        <td class="text-center"><input type="number" name='subtotal'
                                                                       placeholder='0.00' class="form-control"
                                                                       id="sub_total" readonly/></td>
                                    </tr>
                                    <tr>
                                    <tr>
                                        <th class="text-center">Tax Amount</th>
                                        <td class="text-center"><input type="number" name='taxamount'
                                                                       id="tax_amount" placeholder='0.00'
                                                                       class="form-control" readonly/></td>
                                    </tr>
                                    <tr>
                                        <th class="text-center">Grand Total</th>
                                        <td class="text-center"><input type="number" name='grandtotal'
                                                                       id="grandtotal" placeholder='0.00'
                                                                       class="form-control" readonly/></td>
                                    </tr>
                                    </tbody>
                                </table> -->
                            <!-- </div> -->
                        </div>
                    </div>
                    <div class="row mt-4 mb-4">
                        <div class="col-md-9"></div>
                        <div class="col-md-3 mt-3 mb-4">
                            <button class="btn btn-outline-info w-100 text-light rounded-pill" type="submit">Save Credit Note </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </form>

    
    <div class="modal fade" id="customercreation">
        <div class="modal-dialog modal-xl">
            <div class="modal-content" style="background-color: #213b52;">
                <div class="modal-header">
                    <h3 class="m-3">ADD CUSTOMER</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
    
                    <form action="" method="POST" autocomplete="off" id="modalCustomer"> 
    
                        <div class="row">
                            <div class="col-md-4 mt-3">
                                <label for="title">Title</label>
                                <select name="title" id="title" class="form-control" id="title">
                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Miss">Miss</option>
                                    <option value="Ms">Ms</option>
                                </select>
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="firstname">First name</label>
                                <input type="text" class="form-control" id="firstname" name="firstname" 
                                       required style="background-color: #2f516f;color: white;">
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="lastname">Last name</label>
                                <input type="text" class="form-control" id="lastname" name="lastname"
                                       required style="background-color: #2f516f;color: white;">
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mt-3">
                                <label for="company">Company</label>
                                <input type="text" class="form-control" id="company" name="company"
                                        style="background-color: #2f516f;color: white;">
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="location">Location</label>
                                <input type="text" class="form-control" id="location" name="location"
                                        style="background-color: #2f516f;color: white;">
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="location">Place Of Supply</label>
                                <select type="text" class="form-control" id="placesupply" name="placesupply" >
                                    <option value="">Select</option>
                                    <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                                    <option value="Andhra Predhesh">Andhra Predhesh</option>
                                    <option value="Arunachal Predesh">Arunachal Predesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                    <option value="Damn anad Diu">Damn and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Predesh">Himachal Predesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Ladakh">Ladakh</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Madhya Predesh">Madhya Predesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Predesh">Uttar Predesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                    <option value="Other Territory">Other Territory</option>
                                </select>
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mt-3">
                                <label for="gsttype">GST type</label>
                                <select class="custom-select" id="gsttype" name="gsttype"
                                        onclick="hidinput('hello1',this)   "
                                        
                                        required
                                        style="background-color: #243e54; color: white;">
                                        <option selected disabled value="">Select GST Type</option>
                                        <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                        <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                        <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                        <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                        <option value="Consumer">Consumer</option>
                                        <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                        <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                        <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                        <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
    
                                </select>
                                <div class="invalid-feedback">Please select a valid registration type.</div>
                            </div>
    
                            <div class="col-md-4 mt-3 gstrow" id="hello1" style="display: none;">
                                <div >
                                    <label for="gstin">GSTIN</label>
                                    <input type="text" class="form-control" onchange="showMessage(this)"
                                           id="gstin" name="gstin"
                                           style="background-color: #2f516f;color: white;"
                                           value=""
                                           placeholder="29APPCK7465F1Z1">
                                           <a data-toggle="modal" href="#exampleModal"
                                    style="color:#3dd5f3">Get Taxpayer Details</a>
                                    <div class="text-danger m-2" id="warngst"></div>
                                </div>
                            </div>
     
                            <div class="col-md-4 mt-3">
                                <label for="panno">PAN NUMBER</label>
                                <input type="text" class="form-control" id="panno" name="panno"
                                        style="background-color: #2f516f;color: white;"
                                       onchange="checkpan(this)" placeholder="APPCK7465F">
                                <div class="text-danger m-2" id="warnpan"></div>
                            </div>
    
                            <div class="col-md-4 mt-3" >
                                <label for="openbalance">OPENING BALANCE</label>
                              <div class="d-flex">
                                  <select name="bal" id="bal" class="form-select text-white pl-1" style="background-color: #243e54; width: 25%; border-radius: 5px;">
                                    <option value="credit">Credit</option>
                                    <option value="debit">Debit</option>
                                </select>
                                  <input type="number" class="form-control" id="openbalance" value=""  name="openbalance"
                                         style="background-color: #2f516f;color: white;">
                                         
                                  <div class="text-danger m-2" ></div>
                              </div>
                          </div>
                          <div class="col-md-4 mt-3" >
                            <div>
                                <label for="openbalance">Credit Limit</label>
                                <input type="number" class="form-control" id="crd_lmt"  name="crd_lmt"
                                    style="background-color: #43596c;color: white;">
                                <div class="text-danger m-2" ></div>
                            </div>
                        </div>
                        </div>
     
                        <div class="row">
                            <div class="col-md-4 mt-3">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" name="email"
                                        style="background-color: #2f516f;color: white;"
                                       placeholder="finsys@mail.com">
                                <div class="invalid-feedback">Please provide a valid Email</div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="website">Website</label>
                                <input type="text" class="form-control" id="website"
                                       placeholder="www.finsys.com" onchange="checkweb(this)" name="website"
                                       style="background-color: #2f516f;color: white;">
                                <div id="warnweb" class="text-danger"></div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="mobile">Mobile</label>
                                <input type="text" class="form-control" id="mobile"
                                       onchange="checkphone(this)" name="mobile"
                                        style="background-color: #2f516f;color: white;">
                                <div class="text-danger m-2" id="warnphone"></div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-6 mt-5">
                                <div class="row">
                                    <div class="col-md-12 card-title">
                                        <h5 class="mb-0">Billing Address</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mt-3">
                                        <div class="form-row">
                                            <label for="street">Street</label>
                                            <textarea class="form-control street" id="street" name="street"
                                                      
                                                      style="background-color: #2f516f;color: white;"></textarea>
                                            <div class="invalid-feedback">Please provide a valid Street</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="city">City</label>
                                            <input type="text" class="form-control" id="city"
                                                   name="city"
                                                   
                                                   style="background-color: #2f516f;color: white;" placeholder="City">
                                            <div class="invalid-feedback">Please provide a valid City</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="state">State</label>
                                            <select type="text" class="form-control" id="state" name="state"
                                                required style="background-color: #2f516f; color: white;">
                                                <option value="" disabled selected>Choose</option>
                                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                </option>
                                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                <option value="Assam">Assam</option>
                                                <option value="Bihar">Bihar</option>
                                                <option value="Chandigarh">Chandigarh</option>
                                                <option value="Chhattisgarh">Chhattisgarh</option>
                                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                <option value="Damn anad Diu">Damn and Diu</option>
                                                <option value="Delhi">Delhi</option>
                                                <option value="Goa">Goa</option>
                                                <option value="Gujarat">Gujarat</option>
                                                <option value="Haryana">Haryana</option>
                                                <option value="Himachal Predesh">Himachal Predesh</option>
                                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                <option value="Jharkhand">Jharkhand</option>
                                                <option value="Karnataka">Karnataka</option>
                                                <option value="Kerala">Kerala</option>
                                                <option value="Ladakh">Ladakh</option>
                                                <option value="Lakshadweep">Lakshadweep</option>
                                                <option value="Madhya Predesh">Madhya Predesh</option>
                                                <option value="Maharashtra">Maharashtra</option>
                                                <option value="Manipur">Manipur</option>
                                                <option value="Meghalaya">Meghalaya</option>
                                                <option value="Mizoram">Mizoram</option>
                                                <option value="Nagaland">Nagaland</option>
                                                <option value="Odisha">Odisha</option>
                                                <option value="Puducherry">Puducherry</option>
                                                <option value="Punjab">Punjab</option>
                                                <option value="Rajasthan">Rajasthan</option>
                                                <option value="Sikkim">Sikkim</option>
                                                <option value="Tamil Nadu">Tamil Nadu</option>
                                                <option value="Telangana">Telangana</option>
                                                <option value="Tripura">Tripura</option>
                                                <option value="Uttar Predesh">Uttar Predesh</option>
                                                <option value="Uttarakhand">Uttarakhand</option>
                                                <option value="West Bengal">West Bengal</option>
                                                <option value="Other Territory">Other Territory</option>
                                            </select>
                                            <div class="invalid-feedback">Please provide a valid State</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="pincode">Pin Code</label>
                                            <input type="text" class="form-control" id="pincode"
                                                   name="pincode"
                                                    style="background-color: #2f516f;color: white;"
                                                   placeholder="PIN code">
                                            <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="country">Country</label>
                                            <input type="text" class="form-control" id="country"
                                                   name="country"
                                                    style="background-color: #2f516f;color: white;"
                                                   placeholder="Country">
                                            <div class="invalid-feedback">Please provide a valid Country</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mt-5">
                                <div class="row">
                                    <div class="col-md-12 d-flex">
                                        <h5>Shipping Address</h5>
                                        <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins()" id="okay"
                                               name="okay">
                                        <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mt-3">
                                        <div class="form-row">
                                            <label for="shipstreet">Street</label>
                                            <textarea class="form-control" id="shipstreet"
                                                      name="shipstreet"
                                                      
                                                      style="background-color: #2f516f;color: white;"></textarea>
                                            <div class="invalid-feedback">Please provide a valid Street</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="shipcity">City</label>
                                            <input type="text" class="form-control" id="shipcity"
                                                   name="shipcity"
                                                   
                                                   style="background-color: #2f516f;color: white;" placeholder="City">
                                            <div class="invalid-feedback">Please provide a valid City</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="shipstate">State</label>
                                            <select type="text" class="form-control" id="shipstate" name="shipstate"
                                                 style="background-color: #2f516f; color: white;">
                                                <option id="shipst" selected>Choose</option>
                                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                </option>
                                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                <option value="Assam">Assam</option>
                                                <option value="Bihar">Bihar</option>
                                                <option value="Chandigarh">Chandigarh</option>
                                                <option value="Chhattisgarh">Chhattisgarh</option>
                                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                <option value="Damn anad Diu">Damn and Diu</option>
                                                <option value="Delhi">Delhi</option>
                                                <option value="Goa">Goa</option>
                                                <option value="Gujarat">Gujarat</option>
                                                <option value="Haryana">Haryana</option>
                                                <option value="Himachal Predesh">Himachal Predesh</option>
                                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                <option value="Jharkhand">Jharkhand</option>
                                                <option value="Karnataka">Karnataka</option>
                                                <option value="Kerala">Kerala</option>
                                                <option value="Ladakh">Ladakh</option>
                                                <option value="Lakshadweep">Lakshadweep</option>
                                                <option value="Madhya Predesh">Madhya Predesh</option>
                                                <option value="Maharashtra">Maharashtra</option>
                                                <option value="Manipur">Manipur</option>
                                                <option value="Meghalaya">Meghalaya</option>
                                                <option value="Mizoram">Mizoram</option>
                                                <option value="Nagaland">Nagaland</option>
                                                <option value="Odisha">Odisha</option>
                                                <option value="Puducherry">Puducherry</option>
                                                <option value="Punjab">Punjab</option>
                                                <option value="Rajasthan">Rajasthan</option>
                                                <option value="Sikkim">Sikkim</option>
                                                <option value="Tamil Nadu">Tamil Nadu</option>
                                                <option value="Telangana">Telangana</option>
                                                <option value="Tripura">Tripura</option>
                                                <option value="Uttar Predesh">Uttar Predesh</option>
                                                <option value="Uttarakhand">Uttarakhand</option>
                                                <option value="West Bengal">West Bengal</option>
                                                <option value="Other Territory">Other Territory</option>
                                            </select>
                                            <div class="invalid-feedback">Please provide a valid State</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="shippincode">Pin Code</label>
                                            <input type="text" class="form-control" id="shippincode"
                                                   name="shippincode"
                                                    style="background-color: #2f516f;color: white;"
                                                   placeholder="PIN code">
                                            <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mt-3">
                                        <div class="form-row">
                                            <label for="shipcountry">Country</label>
                                            <input type="text" class="form-control" id="shipcountry"
                                                   name="shipcountry"
                                                    style="background-color: #2f516f;color: white;"
                                                   placeholder="Country">
                                            <div class="invalid-feedback">Please provide a valid Country</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required
                                           style="background-color: #2f516f;">
                                    <label>Agree to terms and conditions</label>
                                    <div class="invalid-feedback">You must agree before submitting.</div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3" data-dismiss="modal"
                                        type="submit" id="customerSave">
                                    Submit form
                                </button>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
    
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="newitem">
        <div class="modal-dialog modal-xl">
            <div class="modal-content" style="background-color: #213b52;">
                <div class="modal-header">
                    <h3 class="m-3">New Item</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card p-3 m-3">
                        <form action="" method="post"  autocomplete="off" id="modalItem">
    
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-12 mx-0">
                                            <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <label for="item_name"
                                                       style="color: white;">Name</label>
                                                <input type="text" name="name" class="form-control" id="item_name"
                                                          style="background-color: #2a4964; color: white;"
                                                         autocomplete="off" required>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <label for="type"
                                                       style="color: white;">Type</label>
                                                <select name="type" class="form-control"  id="type"
                                                          style="background-color: #2a4964; color: white;"
                                                          required>
                                                          <option selected disabled value="">Choose...</option>
                                                        <option value="goods">Goods</option>
                                                    <option value="services">Services</option></select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="row">
                                                    <div class="col-md-12 mx-0">
                                                        <div class="row">
                                                            <div class="col-md-6 mt-3">
                                                                <label for="unit" style="color: white;">Unit
                                                                    </label>
                                                                <div class="d-flex">
                                                                    <select class="custom-select" name="unit" id="unit"
                                                                            required
                                                                            style="background-color: #2a4964; color: white;">
                                                                            <option selected disabled value="">Choose...</option>
                                                                            {% for a in unit %}
                                                                            <option style="text-transform:Uppercase;">{{ a.unit_symbol}}-{{ a.name }}</option>
                                                                            {% endfor %}
                                                                            <option>BAG-BAGS</option>
                                                                            <option>BAL-BALE</option>
                                                                            <option>BDL-BUNDLES</option>
                                                                            <option>BKL-BUCKLES</option>
                                                                            <option>BOX-BOX</option>
                                                                            <option>BOU-BILLIONS OF UNITS</option>
                                                                            <option>BTL-BOTTLES</option>
                                                                            <option>BUN-BUNCHES</option>
                                                                            <option>CAN-CANS</option>
                                                                            <option>CBM-CUBIC METER</option>
                                                                            <option>CMS-CENTIMETER</option>
                                                                            <option>CCM-CUBIC CENTIMETER</option>
                                                                            <option>CTN-CARTONS</option>
                                                                            <option>DOZ-DOZEN</option>
                                                                            <option>DRM-DRUM</option>
                                                                            <option>GGR-GREAT GROSS</option>
                                                                            <option>GMS-GRAMS</option>
                                                                            <option>GRS-GROSS</option>
                                                                            <option>GYD-GROSS YARDS</option>
                                                                            <option>KGS-KILOGRAMS</option>
                                                                            <option>KLR-KILOLITER</option>
                                                                            <option>KME-KILOMETRE</option>
                                                                            <option>MTS Metric ton</option>
                                                                            <option>MLT-MILLILITRE</option>
                                                                            <option>MTR-METERS</option>
                                                                            <option>NOS-NUMBER</option>
                                                                            <option>PAC-PACKS</option>
                                                                            <option>PCS-PIECES</option>
                                                                            <option>PRS-PAIRS</option>
                                                                            <option>QTL-QUINTAL</option>
                                                                            <option>ROL-ROLLS</option>
                                                                            <option>SQF-SQUARE FEET</option>
                                                                            <option>SET-SETS</option>
                                                                            <option>SQM-SQUARE METERS</option>
                                                                            <option>SQY-SQUARE YARDS</option>
                                                                            <option>TBS-TABLETS</option>
                                                                            <option>TGM-TEN GROSS</option>
                                                                            <option>THD-THOUSANDS</option>
                                                                            <option>TON-TONNES</option>
                                                                            <option>TUB-TUBES</option>
                                                                            <option>UGS-US GALLONS</option>
                                                                            <option>UNT-UNITS</option>
                                                                            <option>YDS-YARDS</option>
                                            
                                                                       
                                                                    </select>
                                                                    <!-- <a href="{% url 'add_unit' %}">
                                                                        <button type="button"
                                                                                class="btn btn-outline-secondary ml-1">+
                                                                        </button>
                                                                    </a> -->
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 mt-3">
                                                                <label for="hsn" style="color: white;">HSN
                                                                    Code</label>
                                                            <input type="text" name="hsn" class="form-control" id="hsn"
                                                                       style="background-color: #2a4964; color: white;"
                                                                      
                                                                       placeholder="Enter a valid HSN code" required>
                                                              
                                                            </div>
                                                           
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6 mt-3">
                                                               
                                                            </div>
                                                           
                                                        </div>
                                                        
                                        <div class="row">
                                            <div class="col-md-3 mt-3">
                                                <label for="validationCustom05" name style="color: white;">Tax Reference
                                                    </label>
                                             
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check mt-1">
                                                   
                                                        <input class="form-check-input" name="taxref" type="checkbox" id="inclusive"
                                                             value="taxable" checked >Taxable
                                                        <label style="color: white;">
                                                            </label>
                                                  
                                                </div>
                                            </div>
                                            <div class="form-check mt-1">
                                                <input class="form-check-input" name="taxref" type="checkbox"
                                                       value="non taxable" 
                                                       id="check">
                                                <label style="color: white;">Non Taxable</label>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <label for="validationCustom01"
                                                       style="color: white;">Purchase Price</label>
                                                    <div class="row">
                                                       <div >
                                                       <input type="text" class="form-control" value="INR"
                                                        style="margin-left:20px;width:60px;background-color: #2a4960; color: white;"></div>
                                                       <div >
                                                       <input type="number" name="pcost" class="form-control" 
                                                       id="purprice" style="width:540px;background-color: #2a4964; color: white; width:200%"
                                                       value="0"
                                                       >
                                                       </div>
                                                    </div>
    
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <label for="validationCustom01"
                                                       style="color: white;">Sales Price</label>
                                                       <div class="row">
                                                        <div >
                                                            <input type="text" class="form-control" value="INR"
                                                             style="margin-left:20px;width:60px;background-color: #2a4960; color: white;"></div>
                                                            <div >
                                                        <div >
                                                       <input type="text" name="salesprice" class="form-control"
                                                       id="saleprice" style="width:540px;background-color: #2a4964; color: white; width:200%"
                                                       value="0"
                                                       >
                                                        </div>
                                                    </div>
    
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 mx-0">
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                    <label for="validationCustom01"
                                                           style="color: white;">Account</label>
                                                           <select name="pur_account" class="form-control" 
                                                           style="background-color: #2a4964; color: white;"
                                                           id="pur_account" >
                                                           <option >Cost of Goods Sold</option>
                                                           {% for a in acc %}
                                                           <option value="goods">{{ a.name }}</option>
                                                           {% endfor %}</select>
                                                </div>
                                                <div class="col-md-6 mt-3">
                                                    <label for="validationCustom01"
                                                           style="color: white;">Account</label>
                                                    <select name="sale_account" class="form-control" 
                                                              style="background-color: #2a4964; color: white;"
                                                              id="sale_account" >
                                                              <option >Sales</option>
                                                           {% for a in acc1 %}
                                                           <option value="goods">{{ a.name }}</option>
                                                           {% endfor %}</select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 mx-0">
                                                    <div class="row">
                                                        <div class="col-md-6 mt-3">
                                                            <label for="validationCustom01"
                                                                   style="color: white;">Description</label>
                                                                   <textarea class="form-control" name="pur_desc"
                                                                   id="pur_desc" 
                                                                   style="background-color: #2a4964; color: white;"
                                                                   ></textarea>  
                                                        </div>
                                                        <div class="col-md-6 mt-3">
                                                            <label for="validationCustom01"
                                                                   style="color: white;">Description</label>
                                                                   <textarea class="form-control" name="sale_desc"
                                                                   id="sale_desc"
                                                                   style="background-color: #2a4964; color: white;"
                                                                   ></textarea>
                                                        </div>
                                                    </div>
                                         
                                        
                                        <div class="row">
                                            <div class="col-md-12 mx-0">
                                                <div class="row">
                                                    <div class="col-md-6 mt-3">
                                                        <label for="validationCustom01"
                                                               style="color: white;">Intra State Tax Rate</label>
                                                               <select name="intra_st" class="form-control" 
                                                               style="background-color: #2a4964; color: white;"
                                                               id="intra_st" >
                                                               <option >Choose...</option>
                                                               <option value=0>GST 0 (0%)</option>
                                                               <option value=5>GST 5 (5%)</option>
                                                               <option value=12>GST 12 (12%)</option>
                                                               <option value=18>GST 18 (18%)</option>
                                                               <option value=28>GST 28 (28%)</option>
                                                               <option value=0>Out of Scope(0%)</option>
                                                    </select>
                                                    </div>
                                                
                                                    <div class="col-md-6 mt-3">
                                                        <label for="inter_st"
                                                               style="color: white;">Inter State Tax Rate</label>
                                                        <select name="inter_st" class="form-control" 
                                                                  style="background-color: #2a4964; color: white;"
                                                                  id="inter_st" >
                                                                  <option >Choose...</option>
                                                                  <option value=0>IGST 0 (0%)</option>
                                                               <option value=5>IGST 5 (5%)</option>
                                                               <option value=12>IGST 12 (12%)</option>
                                                               <option value=18>IGST 18 (18%)</option>
                                                               <option value=28>IGST 28 (28%)</option>
                                                               <option value=0>Out of Scope(0%)</option>
                                                    </select>
                                                    </div>
                                                </div><br>
                                                <div class="row" >
                                                   
                                                   
                                      
                                                    <div class="col-md-3">
                                                        <div class="form-check">
                                                            <input class="form-check-input" onclick="ShowHideDiv(this)" type="checkbox"  id="track">
                                                            <label class="form-check-label" for="track" >
                                                              Track Inventory
                                                            </label>
                                                          </div>
                                                         
                                                    </div>
                                                
                                                </div>
    
                                                <div class="row" id="inventorytrack" style="display: none">
                                                    <div class="col-md-6 mt-3">
                                                        <label for="validationCustom01"
                                                               style="color: white;">Inventory Account</label>
                                                               <select name="invacc" class="form-control" id="invacc"
                                                                  style="background-color: #2a4964; color: white;"
                                                                  >
                                                               <option selected disabled value="" >Choose...</option>
                                                               <option value="Inventory Assets">Inventory Assets</option>
                                                           
                                                    </select>
                                                    </div>
                                                    <div class="col-md-6 mt-3">
                                                        <label for="validationCustom01"
                                                               style="color: white;">Stock on hand</label>
                                                               <input type="number" name="stock" class="form-control" id="stock"
                                                               style="width:540px;background-color: #2a4964; color: white;"
                                                               value="0"
                                                               >
                                                    </div>
                                                </div>
                                               
    
                                            
                               
                                                <div class="row">
                                                    <div class="col-md-6 mt-3">
                                                       
                                                    </div>
                                                   
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-3 mt-3">
                                                        <label for="validationCustom05" name style="color: white;">Active/Inactive
                                                            </label>
                                                     
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-check">
                                                            <input class="form-check-input" value="Active" type="radio" name="status" id="flexRadioDefault1" checked>
                                                            <label class="form-check-label" for="flexRadioDefault1">
                                                              Active
                                                            </label>
                                                          </div>
                                                         
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" value="Inactive" type="radio" name="status" id="flexRadioDefault2" >
                                                        <label class="form-check-label" for="flexRadioDefault2">
                                                          Inactive
                                                        </label>
                                                      </div>
                                                </div>
                                            </div>
                                            </div>
                                       
                                        <div class="row mt-5 mb-5">
                                            <div class="col-md-4">
                                                <a href="{% url 'goitem' %}"class="btn btn-outline-info rounded-pill w-25 text-light">BACK</a>                                   </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-outline-info rounded-pill w-100 text-light" data-dismiss="modal" type="submit" id="itemSave">SUBMIT</button>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                  </div>
              </div>
          </div>
      </div> 
    </div> 
    
    <script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>    
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        $(document).on('change',function(){
            var paid_off=$('#paid').val();
           var total=$('#grandtotal').val();
           var bal=total-paid_off;
           $('#balance').val(bal);
            
        })
    </script>

    <script>
     
        function show_fields()
        {
            var option=document.getElementById('select_payment').value;
            if(option == 'Cash'){
                document.getElementById('acc_no_label').style.display='none';
                document.getElementById('acc_no').style.display='none';
                document.getElementById('cheque_no_label').style.display='none';
                document.getElementById('cheque_no').style.display='none';
                document.getElementById('upi_id_label').style.display='none';
                document.getElementById('upi_id').style.display='none';
                document.getElementById('acc_no').value="";
                document.getElementById('upi_id').value="";
                document.getElementById('cheque_no').value="";

            }
            else if(option == 'Cheque'){
                document.getElementById('acc_no').value="";
                document.getElementById('upi_id').value="";
                document.getElementById('cheque_no').value="";
                document.getElementById('acc_no_label').style.display='none';
                document.getElementById('acc_no').style.display='none';
                document.getElementById('cheque_no_label').style.display='block';
                document.getElementById('cheque_no').style.display='block';
                document.getElementById('upi_id_label').style.display='none';
                document.getElementById('upi_id').style.display='none';


            }
            else if(option == 'UPI'){
                document.getElementById('acc_no').value="";
                document.getElementById('upi_id').value="";
                document.getElementById('cheque_no').value="";
                document.getElementById('acc_no_label').style.display='none';
                document.getElementById('acc_no').style.display='none';
                document.getElementById('cheque_no_label').style.display='none';
                document.getElementById('cheque_no').style.display='none';
                document.getElementById('upi_id_label').style.display='block';
                document.getElementById('upi_id').style.display='block';
            }
            else if(option == 'no_option'){
                document.getElementById('acc_no').value="";
                document.getElementById('upi_id').value="";
                document.getElementById('cheque_no').value="";
                document.getElementById('acc_no_label').style.display='none';
                document.getElementById('acc_no').style.display='none';
                document.getElementById('cheque_no_label').style.display='none';
                document.getElementById('cheque_no').style.display='none';
                document.getElementById('upi_id_label').style.display='none';
                document.getElementById('upi_id').style.display='none';
            }
            else
            {
                
                document.getElementById('acc_no_label').style.display='block';
                document.getElementById('acc_no').style.display='block';
                document.getElementById('cheque_no_label').style.display='none';
                document.getElementById('cheque_no').style.display='none';
                document.getElementById('upi_id_label').style.display='none';
                document.getElementById('upi_id').style.display='none';
            }
        }
    </script>


    <script>

$(document).ready(function() {
            $("#gsttype").change(function() {
            var x=$('#gsttype').val();
            if(x=="unregistered Business") 
            {
                $(".gstrow").removeClass('d-block');
                $(".gstrow").addClass('d-none');

            }
            else if(x == 'Overseas'){
                $(".gstrow").removeClass('d-block');
                $(".gstrow").addClass('d-none');
            }
            else if(x == 'Consumer'){
                $(".gstrow").removeClass('d-block');
                $(".gstrow").addClass('d-none');
            }
            else 
            {
                $(".gstrow").removeClass('d-none');
                $(".gstrow").addClass('d-block');
            }
            
            });
        });

        $(document).ready(function () {

var bc = document.getElementById("plosu").value;
var compstate = document.getElementById("cmpstate").value;
if (bc == compstate ) {
    document.getElementById('cgst1').style.display = 'flex';
    document.getElementById('sgst1').style.display = 'flex';
    document.getElementById('igst1').style.display = 'none'; 
    $(".intra_tax").removeClass("d-none");
    $(".intra_tax").addClass("d-flex");

    $(".inter_tax").removeClass("d-flex");
    $(".inter_tax").addClass("d-none");

} else {
    document.getElementById('cgst1').style.display = 'none';
    document.getElementById('sgst1').style.display = 'none';
    document.getElementById('igst1').style.display = 'flex';

    $(".inter_tax").removeClass("d-none");
    $(".inter_tax").addClass("d-flex");

    $(".intra_tax").removeClass("d-flex");
    $(".intra_tax").addClass("d-none");
}

var table = document.getElementById("items-table-body");
var roinc = table.rows.length;
    
for(i = 1; i<=roinc;i++){
    console.log($('#product'+i).val());
    $.ajax({
    url: "{% url 'itemdata' %}",
    type : 'GET',
    data:{
        id : $('#product'+i).val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        },
    
    success: function(response) {
        data2 = response.qty
  

        console.log(data2)
        
        $('#qtyspan'+i).text(data2);
    },
    });
}

});


    
        // $('#date1').val(new Date().toJSON().slice(0,10));

        
    
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
     
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
     
    
        function myFunction() {
            var checkBox = document.getElementById("myCheck");
            var text = document.getElementById("bill");
            if (checkBox.checked == true) {
                text.style.display = "block";
            } else {
                text.style.display = "none";
            }
        }
     
        function show() {
            var checkBox = document.getElementById("Check");
            var abc = document.getElementById("sad");
            var def = document.getElementById("happy");
            if (checkBox.checked == true) {
                abc.style.display = "block";
                def.style.display = "block";
            } else {
                abc.style.display = "none";
                def.style.display = "none";
            }
        }
    
        $(document).ready(function () {
            
            var $select1 = $('#plosu'),
            $select2 = $('#tax1'),
            $select3 = $('#tax2'),
            $select4 = $('#tax3'),
            $select5 = $('#tax4'),
            $options = $select2.find('option'),
            $options1 = $select3.find('option'),
            $options2 = $select4.find('option'),
            $options3 = $select5.find('option');
            if ($options1.value == '{{ cmp1.state }}') {
                $options1.text = "{{ cmp1.state }}"
            }
            $select1.on('change', function() {
                if (this.value == "{{ cmp1.state }}") {
                    $select2.html($options.filter('[text="' + this.value + '"]'));
                    $select3.html($options1.filter('[text="' + this.value + '"]'));
                    $select4.html($options2.filter('[text="' + this.value + '"]'));
                    $select5.html($options3.filter('[text="' + this.value + '"]'));
                } 
                else {
                    $select2.html($options.filter('[text="' + " " + '"]'));
                    $select3.html($options1.filter('[text="' + " " + '"]'));
                    $select4.html($options2.filter('[text="' + " " + '"]'));
                    $select5.html($options3.filter('[text="' + " " + '"]'));
                }
            }).trigger('change');
        })
     
        $(document).ready(function(){
            $("#tab_logic").on('click', '.demo', function() {
                var currentRow = $(this).closest("tr");
                var col1=currentRow.find("td:eq(2)").text();
                alert(col1);
            });
        });
     
        $(document).ready(function(){
           
            $('#addrow').click(function(){
                var table = document.getElementById("items-table-body");
                var roinc = table.rows.length;
                var bc = document.getElementById("plosu").value;
                var compstate = document.getElementById("cmpstate").value;
                
                roinc++;
                
                $('#items-table-body').append(
                    `
                        <tr id='addr0${roinc}'>
                            <td class="nnum">${roinc} <input type="text"  name='id[]' value= 0 hidden></td>
                            <td style="width: 20%;">
                                <div class="d-flex">
                                    <select name='items[]' id="product${roinc}" class="form-control product">
                                        <option value=" " >Select Item</option>
                                        {% for i in item %}
                                            <option value="{{ i.name }}">{{ i.name }}</option>
                                        {% endfor %}
                                    </select>
                                    <a href="#">
                                        <button type="button" class="btn btn-outline-secondary m l-1" data-target="#newitem" data-toggle="modal">+</button>
                                    </a>                    
                                </div>
                            </td>
                            <td>
                                <input type="text" name='hsn[]' id="hsn${roinc}" placeholder='Enter HSN Code' class="form-control"/>
                            </td>                
                            <td>
                                <input type="number" style="display: none;"  class="stock_quantity"  name="stock_quantity[]" id="stock_qty${roinc}">
                                <input type="number" style="display: none;"  class="avail_stock"  name="avail_stock[]"  id="avail_stock${roinc}">
                                <input type="number" name='quantity[]' placeholder='Enter Qty' id="qty${roinc}" style="margin-top: 21px;" class="form-control qty" step=0 min=0>
                                <div><span>Available Qty :</span> <label id="qtyspan${roinc}"class=''></label></div>
                            </td>                
                            <td>
                                <input type="number" name='price[]' id="unit${roinc}" placeholder='Enter Unit Price' class="form-control price" step="0.00" min="0">
                            </td>                
                                                            
                            <td>
                                <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex">

                                <select name='tax1[]' id="tax1${roinc}" class="form-control intra_tax d-none">
                                    <option selected disabled > Select GST</option>
                                     <option value=28 >28.0% GST(28%)</option>
                                    <option value=18 >18.0% GST(18%)</option>
                                    <option value=12  >12.0% GST(12%)</option>
                                        <option value=5  >05.0% GST(05%)</option>
                                    <option value=3  >03.0% GST(03%)</option>
                                        <option value=0  >0.0% GST(0%)</option>
                                </select>
                                <select name='tax2[]' id="tax2${roinc}" class="form-control inter_tax d-none">
                                    <option selected disabled > Select IGST</option>
                                     <option value=28 >28.0% IGST(28%)</option>
                                    <option value=18 >18.0% IGST(18%)</option>
                                    <option value=12  >12.0% IGST(12%)</option>
                                        <option value=5  >05.0% IGST(05%)</option>
                                    <option value=3  >03.0% IGST(03%)</option>
                                        <option value=0  >0.0% IGST(0%)</option>
                                </select>
                            </td>        
                            <td style="display: none;"><input type="number" step="any" name='taxamount1' id="taxamount${roinc}" class="form-control taxamount"></td>
                            <td>
                                <input type="number" name='discount[]' placeholder='Enter Discount' id="disc${roinc}" class="form-control disc" step=0 min=0 value = 0>
                            </td>
                            <td>
                                <input type="number" name='total[]' id="total${roinc}" placeholder=0 class="form-control total" value=0 step="any">
                            </td>        

                            <td>
                                <button type="button" id="${roinc}" class="btn btn-danger px-2 mx-1 py-1 remove_row fas fa-close"></button>
                            </td>
                            
                        </tr>
                                                    
                    `
                );
            });

            // $('.product').each(function(index, dropdown) {
            //         var row = $(dropdown).closest('.items-table-body'); // Assuming each row has a class 'item-row'
            //         $.ajax({
            //             url: "{% url 'item_dropdown' %}",
            //             type: "GET",
            //             dataType: "json",
            //             data: row.find('select').serialize(),
            //             csrfmiddlewaretoken: '{{ csrf_token }}',

            //             success: function(data) {
            //                 var dropdown = $('.product');
            //                 dropdown.empty();
            //                 $.each(data, function(key, value) {
            //                     // dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
            //                     dropdown.append($('<option class="text-dark"></option>').attr('value', key).text(value[0]).val(value[1]));
            //                 });

            //             },
            //             error: function(xhr,status,error) {
            //             console.error(xhr.responseText);
            //             }
            //         });
                
            //     });      
            

        });


           
            $(document).on('change','#plosu',function()   {
                $(".seltax").removeClass('d-none');
                $(".seltax").addClass('d-flex');
                $(".intra_tax").removeClass('d-flex');
                $(".intra_tax").addClass('d-none');
                $(".inter_tax").removeClass('d-flex');
                $(".inter_tax").addClass('d-none');
                var bc = document.getElementById("plosu").value;
                var compstate = document.getElementById("cmpstate").value;
                if (bc == compstate ) {
                   

                    document.getElementById('cgst1').style.display = 'flex';
                    document.getElementById('sgst1').style.display = 'flex';
                    document.getElementById('igst1').style.display = 'none'; 

                } else {
                    
                    document.getElementById('cgst1').style.display = 'none';
                    document.getElementById('sgst1').style.display = 'none';
                    document.getElementById('igst1').style.display = 'flex';

                }
                calc();
                    
            });


             // calculation---------------------------

             $(document).on('change', '.product',function(){ 
                
                var n = $(this).attr("id").slice(7);
                var x=$('#inv_no').val();
                var tbldata = document.getElementById("tab_logic");
                var total_rows = tbldata.rows.length;
                var xx=document.getElementById("tab_logic");

                $.ajax({
                url: "{% url 'itemdata' %}",
                type : 'GET',
                data:{
                    id : $(this).val(),
                    invoice_no:$('#inv_no').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                
                success: function(response) {
                    data = response.hsn
                    data2 = response.qty
                    data3 = response.price
                    data4 = response.gst
                    data5 = response.sgst
                    data6=response.mesg
                    data8=response.tot_qty

                    var i;
                    var count=0
                    console.log("successfullllllllllllllllllllllllllll");

                    for( i=1; i < total_rows-1; i++)
                    {
                        var a1=tbldata.rows[i].cells[2].getElementsByTagName('input')[0].value;
                        if(data == a1)
                        {
                            count=count+1;
                        }

                    }


                    if(count == 0)
                   {
                    document.getElementById('hsn'+n).value = data;
                    document.getElementById('qtyspan'+n).innerHTML = data2;
                    document.getElementById('unit'+n).value = data3;
                    document.getElementById('stock_qty'+n).value=data8;
                    document.getElementById('stock_qty_outer').value=data8;
                    console.log("haiiiiiiiiiiiiiiiiiiii")

                    if(data6 == 'different item')
                    {
                        document.getElementById('item_label').innerHTML="";
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML=data6;
                       

                    }
                    else
                    {
                        document.getElementById('item_label').innerHTML="";
                    }
                   }
                   else{
                    console.log("ffffffffffffffffffffffffffffffffffff");
                    document.getElementById('item_label').innerHTML="";
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML="item is already selected,Can't select again.But can modify quantity !!!!!!!!!!!!!!";
                   }

                   
                },
                });
                

            });

            $(document).on('change','.qty',function(){ 
                var n = $(this).attr("id").slice(3);
                var n1=$(this).val();
                
                $.ajax({
                url: "{% url 'itemdata_qty_edit' %}",
                type : 'GET',
                data:{
                    id1 : $(this).val(),
                    id:$('#hsn'+n).val(),
                    id2:$('#product'+n).val(),
                    scred:$('#scred').val(),
                    cusname:$('#customer').val(),
                    tot_quan:$('#stock_qty'+n).val(),
                    invoice_no:$('#inv_no').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                success: function(response) {
                    data6=response.msg
                    data5=response.quantity1
                    document.getElementById('item_label').innerHTML=""
                    sum=parseInt(data5)+parseInt(n1) 
                    document.getElementById('qtyspan'+n).innerHTML=sum;
                    document.getElementById('avail_stock'+n).value=sum;
                    console.log("helloooooooooooooooooooooo");

                    console.log(response.tot_quan);
                    var z=response.tot_quan
                    document.getElementById('stock_qty'+n).value=z;
                    console.log("hellooooooo")


                     if(data6 == 'bigger quantity selected')
                    {
                        document.getElementById('item_label').innerHTML=""
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML=data6;
                    }
                    if(data6 == 'no remaining quantity')
                    {
                        document.getElementById('item_label').innerHTML=""
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML=data6;
                    }
                },
                });
            });


            $(document).on('change','.intra_tax',function(){ 
                var n = $(this).attr("id").slice(4);
                
                $.ajax({
                url: "{% url 'itemdata_tax1' %}",
                type : 'GET',
                data:{
                    id1 : $(this).val(),
                    id:$('#hsn'+n).val(),
                    invoice_no:$('#inv_no').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                success: function(response) {
                    data6=response.msg
                    document.getElementById('item_label').innerHTML=""

                     if(data6 == 'different tax selected')
                    {
                        document.getElementById('item_label').innerHTML=""
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML=data6;
                    }
                },
                });
            });


            $(document).on('change','.inter_tax',function(){ 
                var n = $(this).attr("id").slice(4);
                
                $.ajax({
                url: "{% url 'itemdata_tax1' %}",
                type : 'GET',
                data:{
                    id1 : $(this).val(),
                    id:$('#hsn'+n).val(),
                    invoice_no:$('#inv_no').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                success: function(response) {
                    data6=response.msg
                    document.getElementById('item_label').innerHTML=""

                     if(data6 == 'different tax selected')
                    {
                        document.getElementById('item_label').innerHTML=""
                        document.getElementById('item_label').style.color="red"
                        document.getElementById('item_label').innerHTML=data6;
                    }
                },
                });
            });


           






            $(document).on('click','.remove_row',function(){
                var row_id = $(this).attr("id");
                // console.log(row_id);
                $('#addr0'+row_id+'').remove();

                // updateRowAttributes();
                calc();
            });
           
            // function updateRowAttributes() {
            //     var rows = $('.remove_row');
            //     rows.each(function (index, element) {
            //         var row_id = $(element).attr("id");
            //         console.log(row_id)
            //         var new_row_id = index +1;
            //         console.log(new_row_id)

            //         $('#addr0' + row_id).attr("id", "addr0" + new_row_id);
            //         $('#hsn' + row_id).attr("id", "hsn" + new_row_id);
            //         $('#qty' + row_id).attr("id", "qty" + new_row_id);
            //         $('#qtyspan' + row_id).attr("id", "qtyspan" + new_row_id);
            //         $('#unit' + row_id).attr("id", "unit" + new_row_id);
            //         $('#product' + row_id).attr("id", "product" + new_row_id);
            //         $('#tax1' + row_id).attr("id", "tax1" + new_row_id);
            //         $('#tax2' + row_id).attr("id", "tax2" + new_row_id);
            //         $('#disc' + row_id).attr("id", "disc" + new_row_id);
            //         $('#total' + row_id).attr("id", "total" + new_row_id);
            //         $('#taxamount' + row_id).attr("id", "taxamount" + new_row_id);
            //         $('.remove_row').attr("id", new_row_id);
            //         $('.clone_row').attr("id", new_row_id);
            //         $('.numm').html( new_row_id);

            //         $(element).attr("id", new_row_id);
            //     });
            // }
        

            $(document).on('click','.clone_row',function(){
                var roinc = $("#items-table-body tr").length;
                var originalRow = $(this).closest('#items-table-body tr'); 
                var clonedRow = originalRow.clone();

                // var newId = parseInt(clonedRow.attr('id').replace('addr0', ''))+1;
                clonedRow.attr('id', 'addr0' +(roinc+1));

                clonedRow.find('.nnum').text(roinc+1);

                var hiddenInput = originalRow.find('input[name="id[]"]').clone();
                hiddenInput.val(0);
                clonedRow.find('.nnum').append(hiddenInput);

                clonedRow.find('[id]').each(function() {
                    var oldId = $(this).attr('id');
                    var newId = oldId.replace(/\d+/, roinc+1);
                    console.log(newId)
                    $(this).attr('id', newId );
                });

                clonedRow.find('.product').each(function() {
                    $(this).val(originalRow.find('.product').val());
                });
                clonedRow.find('.intra_tax').each(function() {
                    $(this).val(originalRow.find('.intra_tax').val());
                });
                clonedRow.find('.inter_tax').each(function() {
                    $(this).val(originalRow.find('.inter_tax').val());
                });
                originalRow.after(clonedRow);
                
                calc();
                
            });
            $('#items-table-body').on('keyup change', function () {
                calc();
            });

            $('#tax').on('keyup change', function () {
                calc_total();
            });
         

        function calc() {
            $('#tab_logic tbody tr').each(function () {
                var html = $(this).html();
                if (html != '') {
                    var qty = $(this).find('.qty').val();
                    var price = $(this).find('.price').val();

                    var dis = $(this).find('.disc').val();
                    var bc = $("#plosu").val();
                    var compstate = $("#cmpstate").val();
                    if(bc==compstate){
                        tax = $(this).find('.intra_tax').val();
                    }
                    else{
                        tax = $(this).find('.inter_tax').val();
                    }
                    $(this).find('.total').val((qty * price)-dis);
                    $(this).find('.taxamount').val(((qty * price)-dis) * (tax / 100));
                    calc_total();
                }
            });
        }

        function calc_total() {
             
            total = 0;
            $('.total').each(function () {
                total += parseFloat($(this).val());
            });
            taxamount = 0;
            $('.taxamount').each(function () {
                taxamount += parseFloat($(this).val());
            });
            $('#sub_total').val(total.toFixed(2));
            $('#tax_amount').val(taxamount.toFixed(2));
            ship = parseFloat($("#ship").val());
            // console.log( ship);
            gtot = taxamount + total + ship;
            $('#grandtotal').val(gtot.toFixed(2));
            $('#baldue').val(gtot.toFixed(2));

            test()
        }

        function test(){
                     
                     var bc = $("#plosu").val();
                     var compstate = $("#cmpstate").val();
                     d=0
                     if (bc == compstate  ) {
                         gst = taxamount/2
                          $('#cgst').val(gst.toFixed(2));
                         $('#sgst').val(gst.toFixed(2));
                         $('#igst').val(d.toFixed(2));
                     }
                         
                     if (bc != "{{ cmp1.state }}"  ) {
                         $('#igst').val(taxamount.toFixed(2));
                         $('#cgst').val(d.toFixed(2));
                         $('#sgst').val(d.toFixed(2));
                     }
         
                    

                 }
        function showinnum(divId, element) {
            if (element.value) {
                document.getElementById(divId).innerHTML = "Debit Note " + element.value;
            } else {
                document.getElementById(divId).innerHTML = "Debit Note";
            }
        }

        $(document).on('keyup',"#ship",function(){
            var subtot = $('#sub_total').val();
            var tax = $('#tax_amount').val();
            var sh = $("#ship").val();
            $('#grandtotal').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)).toFixed(2));
            $('#baldue').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)).toFixed(2));
        });

        $(document).on("change", "#adj", function(){
            var round = parseFloat($("#grandtotal").val()) + parseFloat($("#adj").val()) 
            $("#grandtotal").val(round);
            $('#baldue').val(round);
        });


            // create customer--------------------------

        $(document).on("click", "#customerSave", function(){
            
            $.ajax({
    
                type : 'POST',
                url:"{% url 'customers21' %}",

                data:{
                    
                    title : $('#title').val(),
                    first_name : $('#firstname').val(),
                    last_name : $('#lastname').val(),
                    company_name : $("#company").val(),
                    location : $("#location").val(),
                    placesupply:$("#placesupply").val(),
                    openbalance : $("#openbalance").val(),
                    credit_limit : $("#crd_lmt").val(),
                    email : $("#email").val(),
                    website :$("#website").val(),
                    mobile :$("#mobile").val(),
                    street : $("#street").val(),
                    city : $("#city").val(),
                    state : $("#state").val(),
                    country : $("#country").val(),
                    pincode : $("#pincode").val(),
                    shipstreet : $("#shipstreet").val(),
                    shipcity : $("#shipcity").val(),
                    shipstate : $("#shipstate").val(),
                    shipcountry : $("#shipcountry").val(),
                    shippincode : $("#shippincode").val(),
                    gsttype :$("#gsttype").val(),
                    gstin :$("#gstin").val(),
                    panno :$("#panno").val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    
                },
                
                success: function(response) {
                    console.log("success")
                    document.getElementById("modalCustomer").reset();
                    reloadCustomer();
                },
            });        
        });

        function reloadCustomer() {
            $.ajax({
                url: "{% url 'cust_dropdown' %}",
                type: "GET",
                dataType: "json",
                data: $(this).serialize(),
                csrfmiddlewaretoken: '{{ csrf_token }}',

                success: function(response) {
                    id_list = response.id_list
                    title_list = response.title_list
                    first_name = response.first_name
                    last_name = response.last_name
                    console.log('hellooooooooooooooooooooo')

                    var dropdown = $('#customer');
                    dropdown.empty();
                dropdown.append(`<option selected>Select Customer</option>`);

                let select = document.getElementById("customer");
             for(let i=0; i<id_list.length;i++){
            // Create a new option element    
            let newOption = document.createElement("option");
            newOption.text = title_list[i] + ' ' + first_name[i] + ' ' + last_name[i];
            newOption.value = id_list[i] + ' ' + first_name[i] + ' ' + last_name[i]; // Set a value for the new option
             console.log('hellooooooooooooooooooooo')
             console.log(newOption.value)
            // Append the new option to the select field
            select.appendChild(newOption);
        }

                    // $.each(data, function(key, value) {
                    //     console.log(value)
                        // dropdown.append($('<option></option>').attr('value', key).text(value[0] + " " +value[1] + " "+ value[2]).val(key + " " +value[1] + " "+ value[2]));
                        
                    // });
                },
                error: function(xhr, status, error) {
                console.error(xhr.responseText);
                }
            });
        }


        // item modal

        $(document).on("click","#itemSave",function(){
            var taxref,status1;
 
            if ($('#inclusive').checked) {
                tax= $('#inclusive').val();
             } 
             else if($('#check').val()){
                tax = $('#check').val();
             }
             else 
            {
             console.log("Checkbox is not checked.");
            }

            console.log(tax);
            if ($('input[name="status"]:checked').val() == 'Active'){

                status1 = $('#flexRadioDefault1').val();
            }
            else{
                status1 = $('#flexRadioDefault2').val();
            }

            $.ajax({
                
                type : 'POST',
                url:"{% url 'credit_item' %}",
                
                data:{
                    type : $("#type").val(),
                    name : $("#item_name").val(),
                    unit : $("#unit").val(),
                    hsn : $("#hsn").val(),
                    taxref : tax,
                    sell_price : $("#saleprice").val(),
                    cost_price : $("#purprice").val(),
                    sell_acc : $("#sale_account").val(),
                    cost_acc : $("#pur_account").val(),
                    sell_desc : $("#sale_desc").val(),
                    cost_desc : $("#pur_desc").val(),
                    intra_st : $("#intra_st").val(),
                    inter_st : $("#inter_st").val(),
                    invacc : $("#invacc").val(),
                    stock : $("#stock").val(),
                    status : status1,
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    
                },
                
                success: function(response) {
                    console.log(response)
                    document.getElementById("modalItem").reset();
                    reloadItem();
                },
            });        
        });


        function reloadItem() {
            $('.product').each(function(index, dropdown) {
            var row = $(dropdown).closest('.items-table-body'); // Assuming each row has a class 'item-row'
                $.ajax({
                    url: "{% url 'item_dropdown' %}",
                    type: "GET",
                    dataType: "json",
                    data: row.find('select').serialize(),
                    csrfmiddlewaretoken: '{{ csrf_token }}',

                    success: function(data) {
                        var dropdown = $('.product');
                        dropdown.empty();
                        // dropdown.append(`<option selected>Select Item</option>`);
                        $.each(data, function(key, value) {
                        
                            dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                        });

                    },
                    error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                    }
                });
            });
        }

        $(document).ready(function(){
                $('#select_payment').on('change',function(){
                    $.ajax({
                        type:'POST',
                        url:"{% url 'get_account_no' %}",
                        data:{
                            id:$('#select_payment').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}',

                        },
                        success:function(data){
                            document.getElementById('acc_no').value = data.accno;

                        }
                    })
                })
            })


            $(document).ready(function () {
                $('#customer').on('change', function() {
                    console.log($('#customer').val())
                    console.log("hellllllllll00000000000")
                    $.ajax({
                        type : 'POST',
                        
                        url: "{% url 'cust_details' %}",
                        data: {
                            id: $('#customer').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}',
                        },
                        
                        success: function(data){
                            console.log(data.email);
                            document.getElementById('cred_email').value = data.email;
                            document.getElementById('mailaddr').value = data.street + '\n' + data.city + '\n' + data.state + '\n' + data.country  + '\n' + data.pincode ;
                            document.getElementById('plosu').value=data.state;
                            document.getElementById('gst_treat').value=data.gst_treat;
                            var place_supply=document.getElementById('plosu').value;
        var cmp_place=document.getElementById('cmpstate').value;
        if( place_supply == cmp_place ){
            $(".inter_tax").removeClass('d-flex');
                    $(".inter_tax").addClass('d-none');

                    $(".intra_tax").removeClass('d-none');
                    $(".intra_tax").addClass('d-flex');
                    document.getElementById('cgst1').style.display = 'flex';
                    document.getElementById('sgst1').style.display = 'flex';
                    document.getElementById('igst1').style.display = 'none'; 

        }
        else{
            $(".intra_tax").removeClass('d-flex');
                    $(".intra_tax").addClass('d-none');

                    $(".inter_tax").removeClass('d-none');
                    $(".inter_tax").addClass('d-flex');
                    document.getElementById('cgst1').style.display = 'none';
                    document.getElementById('sgst1').style.display = 'none';
                    document.getElementById('igst1').style.display = 'flex';
        }

                            
                            $('#inv_no').empty();
                            if(data.gstno)
                            {
                                document.getElementById('gst_no').style.display='block';
                                document.getElementById('gst_no_label').style.display='block';
                                $('#gst_no').val(data.gstno);

                            }
                            else{
                                document.getElementById('gst_no').style.display='none';
                                document.getElementById('gst_no_label').style.display='none';
                            }

                            if (data.inv_id) {
                                $('#inv_no').append($('<option>', {
                            value:0+" "+data.inv_id,
                            text:'Invoice'+" "+ data.inv_id
                        }));

                        }
                        else{
                            $('#inv_no').append($('<option>', {
                            value:3+" "+'0',
                            text: 'invoice not available'
                        }));
                        }

                        if (data.recinv_id) {
                                $('#inv_no').append($('<option>', {
                            value:1+" "+data.recinv_id,
                            text:'Re.Invoice'+" "+data.recinv_id
                        }));

                        }
                        else{
                            $('#inv_no').append($('<option>', {
                            value:3+" "+'0',
                            text: 'recuring invoice not available'
                        }));
                        }
                            
                        calc(); 

                        }
                    });
                });
            });


          
            // var place = document.getElementById('plosu').value;
            //   $(document).on('click','#product',function(){

            //     select = $('#product').val();
            //     $.ajax({
            //         type: "GET",
            //         url: "{% url 'itemdata' %}",
            //         data: {
            //         id: select
                    
            //         },
                    
                    
            //         success:function(response){
            //                  data = response.hsn
            //                 data2 = response.qty
            //                 data3 = response.price
            //                 data4 = response.gst
            //                 data5 = response.sgst
                            
            //                 document.getElementById('hsn1').value = data;
            //                 document.getElementById('qtyspan').innerHTML = data2;
            //                 document.getElementById('unit1').value = data3;

                       
                            
            //                 if (place == '{{ cmp1.state }}'){
            //                     document.getElementById('ta1').innerHTML = data4 + ' % GST';
            //                     document.getElementById('ta1').value=data4;
            //                 } 
            //                 else{
            //                     document.getElementById('ta5').innerHTML  = data5 + ' % IGST';
            //                     document.getElementById('ta5').value=data5;
            //                 }
                            
            //             }
                    
            //     });
            // });     


            $(document).on("click",".seltax",function(){
                
                $(".seltax").removeClass('d-flex');
                $(".seltax").addClass('d-none');

                console.log($("#plosu").val());
                console.log($("#cmpstate").val());

                if($("#plosu").val() == $("#cmpstate").val()){
                    console.log("yes");
                    $(".inter_tax").removeClass('d-flex');
                    $(".inter_tax").addClass('d-none');

                    $(".intra_tax").removeClass('d-none');
                    $(".intra_tax").addClass('d-flex');
                    
                }
                else{
                    console.log("no");
                    $(".intra_tax").removeClass('d-flex');
                    $(".intra_tax").addClass('d-none');

                    $(".inter_tax").removeClass('d-none');
                    $(".inter_tax").addClass('d-flex');
                }

            });

            $(document).on('change','#plosu',function()   {
                // $(".seltax").removeClass('d-none');
                // $(".seltax").addClass('d-flex');
                // $(".intra_tax").removeClass('d-flex');
                // $(".intra_tax").addClass('d-none');
                // $(".inter_tax").removeClass('d-flex');
                // $(".inter_tax").addClass('d-none');


                $(".seltax").removeClass('d-flex');
                $(".seltax").addClass('d-none');
                var bc = document.getElementById("plosu").value;
                var compstate = document.getElementById("cmpstate").value;
                if (bc == compstate ) {
                    $(".inter_tax").removeClass('d-flex');
                    $(".inter_tax").addClass('d-none');

                    $(".intra_tax").removeClass('d-none');
                    $(".intra_tax").addClass('d-flex');
                    document.getElementById('cgst1').style.display = 'flex';
                    document.getElementById('sgst1').style.display = 'flex';
                    document.getElementById('igst1').style.display = 'none'; 

                } else {
                    $(".intra_tax").removeClass('d-flex');
                    $(".intra_tax").addClass('d-none');

                    $(".inter_tax").removeClass('d-none');
                    $(".inter_tax").addClass('d-flex');
                    document.getElementById('cgst1').style.display = 'none';
                    document.getElementById('sgst1').style.display = 'none';
                    document.getElementById('igst1').style.display = 'flex';

                }
                    
            });
                
            
    
 

 
        function poppins() {
            var chkbtn = document.getElementById('okay');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet').value = document.getElementById('street').value;
                document.getElementById('shipcity').value = document.getElementById('city').value;
                document.getElementById('shippincode').value = document.getElementById('pincode').value;
                document.getElementById('shipcountry').value = document.getElementById('country').value;
                document.getElementById('shipstate').value = document.getElementById('state').value;
                document.getElementById('shipst').innerHTML = document.getElementById('state').value;
            } else {
                document.getElementById('shipstreet').value = '';
                document.getElementById('shipcity').value = '';
                document.getElementById('shipstate').value = '';
                document.getElementById('shippincode').value = '';
                document.getElementById('shipcountry').value = '';
            }
        }
   
        function hidinput(divId, element) {
            if (element.value == 'GST-registered-Regular') {
                document.getElementById(divId).style.display = 'block';
            } else {
                document.getElementById(divId).style.display = 'none';
            }
        }

        function showMessage(input) {
            const gstin = input.value;

            if (gstin.length === 15) {
                // document.getElementById("message").textContent = "Please wait, validating GSTIN format...";
                setTimeout(() => checkgst(input), 1000);  // Wait for a second and then validate GSTIN
            } else {
                document.getElementById("message").textContent = "";
            }
        }

        function checkgst(element) {
            var gstinput = element.value;
            var gstregexp = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput.match(gstregexp)) {
                document.getElementById('warngst').innerHTML = '';
            } else {
                document.getElementById('warngst').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }

        function checkpan(element) {
            var paninput = element.value;
            var panregexp = ["[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"]
            if (paninput.match(panregexp)) {
                document.getElementById('warnpan').innerHTML = '';
            } else {
                document.getElementById('warnpan').innerHTML = 'Please provide a valid PAN Number';
                alert('Please provide a valid PAN Number')
            }
        }

        function checkweb(element) {
            var webinput = element.value;
            var webregexp = "www."
            if (webinput.startsWith(webregexp)) {
                document.getElementById('warnweb').innerHTML = '';
            } else {
                document.getElementById('warnweb').innerHTML = 'Please provide a valid Website Address';
                alert('Please provide a valid Website Address')
            }
        }

        function checkphone(element) {
            var phoneinput = element.value;
            var phoneregexp = "[0-9]{10}";
            if (phoneinput.match(phoneregexp)) {
                document.getElementById('warnphone').innerHTML = '';
            } else {
                document.getElementById('warnphone').innerHTML = 'Please provide a valid Phone Number';
                alert('Please provide a valid Phone Number')
            }
        }
     
        function insertValue() {
            var select = document.getElementById("select"),
            txtVal = document.getElementById("val").value,
            newOption = document.createElement("OPTION"),
            newOptionval = document.createTextNode(txtVal);
            newOption.appendChild(newOptionval);
            select.insertBefore(newOption, select.lastChild);
        }
        
        $('.datepicker').pickadate({
            selectMonths: true,
            selectYears: true
        }),
        $('.timepicker').pickatime()
        
        $(function () {
            $('#date-time').bootstrapMaterialDatePicker({
                format: 'YYYY-MM-DD HH:mm'
            });
            $('#date1').bootstrapMaterialDatePicker({
                time: false
            });
            $('#time').bootstrapMaterialDatePicker({
                date: false,
                format: 'HH:mm'
            });
        });
        
        $(document).ready(function () {
            var current_fs, next_fs, previous_fs; //fieldsets
            var opacity;
            $(".next").click(function () {
                current_fs = $(this).parent();
                next_fs = $(this).parent().next();

                $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
                next_fs.show();
                current_fs.animate({opacity: 0}, {
                    step: function (now) {
                        opacity = 1 - now;
                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        next_fs.css({'opacity': opacity});
                    },
                    duration: 600
                });
            });
            $(".previous").click(function () {
                current_fs = $(this).parent();
                previous_fs = $(this).parent().prev();
                $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
                previous_fs.show();
                current_fs.animate({opacity: 0}, {
                    step: function (now) {
                        opacity = 1 - now;
                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        previous_fs.css({'opacity': opacity});
                    },
                    duration: 600
                });
            });

            $('.radio-group .radio').click(function () {
                $(this).parent().find('.radio').removeClass('selected');
                $(this).addClass('selected');
            });
        });
      

        
        function ShowHideDiv(track) {
            var inventorytrack = document.getElementById("inventorytrack");
            inventorytrack.style.display = track.checked ? "flex" : "none";
        } 

        
    </script>
{% endblock %}