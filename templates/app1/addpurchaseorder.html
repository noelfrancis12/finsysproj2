{% extends 'app1/base.html' %}
{% block body %}
    {% load static %}

    <style>
        .hide{
			display: none;
    	}
        input:read-only {
            background-color: rgba(0,0,0,.4) !important;
            color: #fff;
        }
    </style>
    <script>
        $(':input[readonly]').css({'background-color':'rgba(0,0,0,.4)'});
    </script>

    <div class="page-content">
        <div class="card radius-15">
            <div class="card-body">
                <div class="card-title">
                    <center><h3 class="mb-0">NEW PURCHASE ORDER</h3></center>
                </div>
                <hr/>
            </div>
        </div>
        <div class="card radius-15" style="background-color: #243e54;">
            <div class="card-body">
                <div class="card-title">
                    <h4 class="mb-0">Vendor Details</h4>
                </div>
                <hr/>
                <form action="{% url 'createpurchaseorder' %}" id="purchaseOrderForm" method="post" enctype="multipart/form-data" autocomplete="off">
                    {% csrf_token %}
                    
                    {% if user.is_authenticated %}

                        <div class="row">
                            <div class="col-md-4 mt-2">
                                <label for="validationCustom01">Select Vendor</label>
                                <div class="d-flex">
                                    <select name="vendor_name" id="select" class="custom-select form-control" required>
                                        <option value=""  hidden>Select Vendor</option>
                                        <option id="new_vndr"></option>
                                        {% for v in vndr %}
                                        <option value="{{ v.firstname }} {{ v.lastname }}">{{ v.firstname }} {{ v.lastname }}</option>
                                        {% endfor %}
                                    </select>
                                    <a>
                                        <button type="button" class="btn btn-outline-secondary ml-1" 
                                        data-target="#newvendor" data-toggle="modal">+</button>
                                    </a>
                                    <input type="text" id="email" name="email" placeholder='Email' class="form-control" style="display: none;">
                                    <div class="valid-feedback">Looks good!</div> 
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mt-3">
                                <label for="">Billing Address</label>
                                <div class="form-row">
                                    <textarea class="form-control" id="billingaddress" name="billing_address" rows="5"></textarea>
                                </div>
                            </div>
                            <div class="col-md-4 mt-3">
                                <label for="">Email</label> 
                                <input type="text" id="email1" name="email" placeholder='Email' class="form-control ml-1"><br>
                                <label for="">GST Treatment</label> 
                                <input type="text" id="gstTreatment" name="gsttype" placeholder='GST Treatment' class="form-control ml-1">
                            </div>
                            <div class="col-md-4 mt-3">
                                <!-- <label for="">Balance</label> 
                                <input type="text" id="balance1" name="Balance" placeholder='Balance' class="form-control ml-1"><br> -->
                            <div id="disabled">
                                <label for="">GSTIN</label> 
                                <input type="text" id="gstin1" name="gstin" placeholder='29APPCK7465F1Z1' class="form-control ml-1">
                            </div>
                        </div>
                        </div>
                        <hr>
                        <br><br>
                        <div class="row">
                            <div class="col-md-3 mt-2"><h5>Purchase Order Details</h5></div>
                            <div class="col-md-3 mt-2"></div>
                            <!-- <div class="col-md-3 mt-2">
                                <label>Purchase Order Number</label>
                                <div class="d-flex">
                                    <input name="puchaseorder_no" type="number" class="form-control" placeholder="1000">
                                    <a class="form-control" data-target="#porderno" data-toggle="modal" style="width: 60px; cursor: pointer;"><center><i class="fa fa-gear"></i></center></i></a>
                                </div>   
                            </div> -->
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3 mt-2">
                                <label for="">Source of Supply</label>
                                <select name="sourceofsupply" id="plosu" class="form-control place-of-supply" onchange="state(this)">
                                    <option value="{{ cmp1.state }}" selected hidden>{{ cmp1.state }}</option>
                                    <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                    <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                    <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                    <option value="[AS] Assam">[AS] Assam</option>
                                    <option value="[BR] Bihar">[BR] Bihar</option>
                                    <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                    <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                    <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                    <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                    <option value="[DL] Delhi">[DL] Delhi</option>
                                    <option value="[GA] Goa">[GA] Goa</option>
                                    <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                    <option value="[HR] Haryana">[HR] Haryana</option>
                                    <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                    <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                    <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                    <option value="[KA] Karnataka">[KA] Karnataka</option>
                                    <option value="Kerala">[KL] Kerala</option>
                                    <option value="[LA] Ladakh">[LA] Ladakh</option>
                                    <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                    <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                    <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                    <option value="[MN] Manipur">[MN] Manipur</option>
                                    <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                    <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                    <option value="[NL] Nagaland">[NL] Nagaland</option>
                                    <option value="[OD] Odisha">[OD] Odisha</option>
                                    <option value="[PY] Puducherry">[PY] Puducherry</option>
                                    <option value="[PB] Punjab">[PB] Punjab</option>
                                    <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                    <option value="[SK] Sikkim">[SK] Sikkim</option>
                                    <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                    <option value="[TS] Telangana">[TS] Telangana</option>
                                    <option value="[TR] Tripura">[TR] Tripura</option>
                                    <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                    <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                    <option value="[WB] West Bengal">[WB] West Bengal</option>
                                    <option value="[OT] Other Territory">[OT] Other Territory</option>
                                </select>
                            </div>
                            <div class="col-md-3 mt-2">
                                <label for="">Destination of Supply</label>
                                <select name="destiofsupply" id="" class="form-control" required>
                                    <option value="" hidden></option>
                                    <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                    <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                    <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                    <option value="[AS] Assam">[AS] Assam</option>
                                    <option value="[BR] Bihar">[BR] Bihar</option>
                                    <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                    <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                    <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                    <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                    <option value="[DL] Delhi">[DL] Delhi</option>
                                    <option value="[GA] Goa">[GA] Goa</option>
                                    <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                    <option value="[HR] Haryana">[HR] Haryana</option>
                                    <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                    <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                    <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                    <option value="[KA] Karnataka">[KA] Karnataka</option>
                                    <option value="[KL] Kerala">[KL] Kerala</option>
                                    <option value="[LA] Ladakh">[LA] Ladakh</option>
                                    <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                    <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                    <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                    <option value="[MN] Manipur">[MN] Manipur</option>
                                    <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                    <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                    <option value="[NL] Nagaland">[NL] Nagaland</option>
                                    <option value="[OD] Odisha">[OD] Odisha</option>
                                    <option value="[PY] Puducherry">[PY] Puducherry</option>
                                    <option value="[PB] Punjab">[PB] Punjab</option>
                                    <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                    <option value="[SK] Sikkim">[SK] Sikkim</option>
                                    <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                    <option value="[TS] Telangana">[TS] Telangana</option>
                                    <option value="[TR] Tripura">[TR] Tripura</option>
                                    <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                    <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                    <option value="[WB] West Bengal">[WB] West Bengal</option>
                                    <option value="[OT] Other Territory">[OT] Other Territory</option>
                                </select>
                            </div>
                            <div class="col-md-3 mt-2">
                                <label for="">Branch</label>
                                <input type="text" class="form-control" id="" name="branch" placeholder="">
                            </div>
                            <div class="col-md-3 mt-2">
                                <label for="">Reference</label>
                                <input type="text" class="form-control" id="" name="reference" placeholder="" value="{{ reference_number }}" readonly>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mt-3">
                                <label>Purchase Order Number</label>
                                <div class="d-flex">
                                    <input name="puchaseorder_no" type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                        <hr><br><br>
                        <div class="col-md-3 mt-2">
                            <h5>Deliver to Details</h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3 mt-2">
                                <div class="d-flex">
                                    <select name="contact_name" id="select1" class="custom-select" required>
                                        <option value="" hidden>Select Customer</option>
                                        <option id="cust_name"></option>
                                        {% for c in cust %}
                                            <option value="{{ c.firstname }} {{ c.lastname }}" data-gstin="{{ c.gstin }}">{{ c.firstname }} {{ c.lastname }}</option>
                                        {% endfor %}
                                    </select>
                                    <a class="btn btn-outline-secondary ml-1" role="button" data-target="#newcustomer" data-toggle="modal">+</a>
                                </div>
                            </div>
                        </div>                        
                        <br>
                        <div class="row">
                            <div class="col-md-4 mt-2">
                                <div class="form-row">
                                    <label for="">Details</label>
                                    <textarea class="form-control" id="deliverto" name="deliverto" rows="5"></textarea>
                                </div>
                            </div>
                            <div class="col-md-4 mt-2">
                                <div class="form-row">
                                    <label for="">GST Treatment</label>
                                    <input type="text" id="gstTreatment1" name="cgsttype" placeholder='GST Treatment' class="form-control ml-1">
                                </div>
                            </div>
                            <div class="col-md-4 mt-2" id="disabled2">
                                <div class="form-row">
                                    <label for="">GSTIN</label>
                                    <input type="text" id="gstin2" name="cgstin" placeholder='29APPCK7465F1Z1' class="form-control ml-1">
                                </div>
                            </div>
                        </div>
                        
                        <br>
                        <div class="row">
                            <div class="col-md-4 mt-2">
                                <label for="">Date</label>
                                <input type="date" class="form-control" id="date" name="date" placeholder="">
                            </div>
                            <!-- <div class="col-md-3 mt-2">
                                <label for="">Expected Delivery Date</label>
                                <input type="date" class="form-control date1-input" id="date1" name="deliver_date" onchange="checkDate()">
                            </div> -->
                            <div class="col-md-4 mt-2">
                                <label for="">Credit Period</label>
                                <div class="d-flex">
                                    <select class="custom-select" name="credit_period" id="termadd" onclick="showinp('newtrm', this)" required>
                                        <option selected id="trmopt" hidden></option>
                                        <option value="0">Due on Receipt</option>
                                        <option value="15">NET 15</option>
                                        <option value="30">NET 30</option>
                                        <option value="60">NET 60</option>
                                        <option id="new_crprd"></option>
                                        {% for pd in cpd %}
                                            <option value="{{ pd.newperiod }}">NET {{ pd.newperiod }}</option>
                                        {% endfor %}
                                    </select>
                                    <a class="btn btn-outline-secondary ml-1" data-target="#crperiod" data-toggle="modal">+</a>
                                </div> 
                            </div>
                            <div class="col-md-4 mt-2">
                                <label>Due Date</label>
                                <input type="text" id="duedat" class="form-control" name="due_date">
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-4"></div>
                            <div class="col-md-2"></div>
                            <div class="col-md-2"></div>
                        </div>  

                        <div class="row clearfix">
                            <div class="col-md-12 table-responsive-md mt-3">
                                <table class="table table-bordered table-hover mt-3" id="tab_logic">
                                    <thead>
                                        <tr>
                                            <th class="text-center">#</th>
                                            <th class="text-center">Item</th>
                                            <th class="text-center">HSN Code</th>
                                            <th class="text-center">Quantity</th>
                                            <th class="text-center">Rate</th>
                                            <th class="text-center">Tax (%)</th>
                                            <th class="text-center">Discount</th>
                                            <th class="text-center">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody id="items-table-body">
                                        <tr id='addr01'>
                                          <td class="nnum" style="text-align: center;">1</td>
                                          <td style="width: 20%;">
                                            <div class="d-flex">
                                            <select name='items[]' id="product1" class="form-control product" style="background-color: #43596c; color: white;" onchange="changeprd(this.id)">
                                              <option value=" " selected hidden>Select Product</option>
                                              <option id="new_itm"></option>
                                              {% for i in item %}
                                                      {% if i.cid_id == cmp1.cid %}
                                                          <option 
                                                                  value="{{ i.name  }}">{{ i.name  }} </option>
                                                      {% endif %}
                                                  {% endfor %}
                              
                                                    </select>
                      
                                                  <a href="#">
                                                      <button type="button" class="btn btn-outline-secondary ml-1" 
                                                      data-target="#newitem" data-toggle="modal">+</button>
                                                  </a>
                                              </div>
                                          </td>
                                          <td>
                                            <div class="d-flex">
                                              <input type="text" name='hsn[]' id="hsn1" placeholder='Enter HSN Code' class="form-control HSNCODE" style="background-color: #43596c; color: white;" readonly />
                                                
                                            <!-- <a href="#">
                                              <button type="button" class="btn btn-outline-secondary ml-1 fas fa-pencil demo" 
                                              ></button>
                                          </a> -->
                                        </div>
                                          
                                          </td>
                                          <!-- <td><input type="text" name='description[]' id="description" placeholder='Description' class="form-control" style="background-color: #43596c; color: white;" /></td> -->
                                          <td >
                                              <input type="number" name='quantity[]' id="qty1"  class="form-control qty mb-1" step=0 min=0 style="background-color: #43596c;margin-top: 21px; color: white;" value=0 onchange="changeqty(this.id)" />
                                              <input type="text" id="avl1" style="display: none;">
                                            <div class="d-flex"><span>Available Qty :</span> <span id="qtyspan1" class=''></span></div>
                                          </td>
                                          <td><input type="number" name='rate[]' id="unit1" class="form-control price" step="0.00" min="0" style="background-color: #43596c; color: white;" value=0 readonly /></td>
                                          
                                          <td style="width: 13%;">
                                            <input hidden value="{{cmp1.state}}" id="cmpstate">
                                            <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex">
                                            <select name='tax[]' id="tax11" class="form-control tax intra_tax d-none" onchange="taxchange(this.id)">
                                                <option selected disabled hidden>Select GST</option>
                                                <option value=28 >28.0% GST</option>
                                                <option value=18 >18.0% GST</option>
                                                <option value=12  >12.0% GST</option>
                                                  <option value=5  >05.0% GST</option>
                                                <option value=3  >03.0% GST</option>
                                                  <option value=0  >0.0% GST</option>
                                            </select>
                                            <select id="tax21" class="form-control tax inter_tax d-none " onchange="taxchange(this.id)">
                                                <option selected disabled hidden >Select IGST</option>
                                                <option value=28 >28.0% IGST</option>
                                                <option value=18 >18.0% IGST</option>
                                                <option value=12  >12.0% IGST</option>
                                                  <option value=5  >05.0% IGST</option>
                                                <option value=3  >03.0% IGST</option>
                                                  <option value=0  >0.0% IGST</option>
                                            </select>
                                            <input type="text" style="display: none;" id="tax_percent1">
                                            <div class="mt-1" style=" text-align: center;color: red;" ><span id="invalidtax1" style="display: none;"> Invalid Tax %</span> </div>    
                                          </td>
                                          <td >
                                              <input type="number" name='reduce[]'  placeholder='Enter Discount' id="disc1" value=0 class="form-control disc" step=0 min=0 style="background-color: #43596c;  color: white;"  />
                                          </td>
                      
                                          <td><input type="number" name='amount[]' id="total1" class="form-control total" value=0 readonly style="background-color: #43596c; color: white;" /></td>
                                          <td style="display: none;"><input type="number" name='taxamount1' id="taxamount1" class="form-control taxamount" />
                                          </td>
                                        
                                        <td>
                                          <button type="button" id="1" class="btn  font-weight-bold clone_row fa fa-clone px-2 my-1 py-1" title="Clone Row" style="background-color:rgb(88, 107, 143);"></button><br>
                                          <button type="button" id="1" class="btn btn-danger remove_row px-2 py-1 mx-1 fa fa-close" title="Remove Row"> </button>
                                      </td>
                                    </tr>
                                      </tbody>
                                    <tr>
                                        <td style="border: none;"><a class="btn btn-outline-secondary ml-1" role="button" id="add" >+</a></td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="row clearfix" style="margin-top:20px">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="">Note</label>
                                        <div class="form-row">
                                            <textarea class="form-control" name="note" rows="3"></textarea>
                                        </div><br>
                                        <div>
                                            <input type="file" class="form-control" name="file">
                                        </div>
                                        <div>
                                        </div>
                                    </div>
                                </div>
                        <div class="row mt-5 mb-3">
                            <div class="col-md-6">
                                <label for="paytype">Payment Type</label>
                                <div class="d-flex">
                                    <select class="form-control" name="paytype" id="paytype" required>
                                        <option value="" hidden>Select</option>
                                        {% for i in bank %}
                                            <option value="{{i.id}}" data-account="{{i.account_number}}">{{i.bankname}}</option>
                                        {% endfor %}
                                        <option value="Cash">Cash</option>
                                        <option value="Cheque">Cheque</option>
                                        <option value="UPI">UPI</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Add this section to your HTML form -->
                        <div class="row mt-3 mb-3" id="accountNumberField" style="display: none;">
                            <div class="col-md-6">
                                <label for="accountNumber">Account Number</label>
                                <input type="text" class="form-control" name="accountNumber" id="accountNumber">
                            </div>
                        </div>
                        
                        <div class="row mt-3 mb-3" id="chequeNumberField" style="display: none;">
                            <div class="col-md-6">
                                <label for="chequeNumber">Cheque Number</label>
                                <input type="text" class="form-control" name="chequeNumber" id="chequeNumber">
                            </div>
                        </div>
                        
                        <div class="row mt-3 mb-3" id="upiField" style="display: none;">
                            <div class="col-md-6">
                                <label for="upiNumber">UPI Number</label>
                                <input type="text" class="form-control" name="upiNumber" id="upiNumber">
                            </div>
                        </div>
                        

                        <div >
                            <br><br><br><br><br>
                        </div>
                        
                        
                    </div>
                    <div class="col-md-1 mt-3"></div>
                    <div class="col-md-5 table-responsive-md mt-3" id="tab_logic_total" style="background-color:rgba(0,0,0,.4); border: 1px solid rgba(128, 128, 128, 0.6);"><br>
                        <div class="p-3">
                            <div class="row container-fluid p-2 m-0">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Sub Total</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" step="any" name='sub_total' placeholder=0 
                                    class="form-control" id="subtotal">
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid p-2 m-0" style="display: none;">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Total Discount</label></div>
                                
                                <div class="col-sm-8 mt-2"><input type="number" step="any" name='tot_dis' placeholder=0 
                                    class="form-control" id="tot_dis">
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid p-2 m-0" style="display: none;">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Discount</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='discount' id="disc1" placeholder=0 
                                    class="form-control disc"/>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            
                            <div class="row container-fluid hide p-2 m-0" id="igst1">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">IGST</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='igst' step="any" id="igst" placeholder=0 
                                    class="form-control"/>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid hide p-2 m-0" id="cgst1">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">CGST</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='cgst' step="any" id="cgst" placeholder=0 
                                    class="form-control"/>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid hide p-2 m-0" id="sgst1">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">SGST</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='sgst' step="any" id="sgst" placeholder=0 
                                    class="form-control"/>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid  p-2 m-0">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Tax Amount</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='tax_amount' step="any" id="tax_amount" placeholder=0 
                                    class="form-control"/>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid p-2 m-0" style="display: none;">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">TCS</label></div>
                                <div class="col-sm-4 mt-2">
                                    <select name="" class="form-control" id="tcs1" onchange="calc_tcs()">
                                        <option value="" selected>Select a Tax</option>
                                        <option value="1">Cess 1%</option>
                                    </select>
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <input type="number" id="tcs_amount" name='tcs' placeholder='0' class="form-control">
                                </div>
                            </div>
                            <div class="row container-fluid p-2 m-0">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Shipping Charge</label></div>
                                
                                <div class="col-sm-8 mt-2"><input type="number" step="any" name='shipcharge' placeholder=0 
                                    class="form-control" id="shipcharge" value="0">
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid p-2 m-0">
                                <div class="col-sm-4 mt-2"><a class="text-center">Adjustments</a></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='round_off' step="any" id="round_off" placeholder=0 
                                    class="form-control" value="0">
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div><hr>
                            <div class="row container-fluid  p-2 m-0" style="display: none;">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Balance Due</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='balance_due' id="due" placeholder="0" step="any" 
                                    class="form-control" readonly>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid  p-2 m-0">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Grand Total</label></div>
                                <div class="col-sm-8 mt-2"><input type="number" name='grand_total' id="grandtotal" placeholder="0" step="any" 
                                    class="form-control" readonly>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid  p-2 m-0">
                                
                                <div class="col-sm-4 mt-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="invalidCheck">
                                        <label>Advance Amount</label>
                                        
                                    </div>
                                </div>
                                
                                <div class="col-sm-8 mt-2">
                                    <input type="number" name='paid' id="paid" placeholder="0" value="0" step="any" 
                                    class="form-control">
                                    <p id="error-message" class="mt-1" style="color: red;"></p>
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                            <div class="row container-fluid  p-2 m-0">
                                <div class="col-sm-4 mt-2"><label for="a" class="text-center">Balance</label></div>
                                
                                <div class="col-sm-8 mt-2">
                                    <input type="number" name='bal_due' id="bal_due" placeholder="0" step="any" 
                                    class="form-control" readonly >
                                    
                                </div>
                                <div class="col-sm-4 m-0 p-0"></div>
                            </div>
                        </div>

                        
                    </div>
                </div>
                <div class="notices mt-3">
                    <div class="text-muted">NOTICE:</div>
                    <div class="text-muted">
                      Fin sYs Terms and Conditions Apply
                    </div>
                  </div>
                  <footer class="text-muted">Purchase was created on a computer and is valid without the
                    signature and seal.
                </footer>
                <div class="row mt-3">
                    <div class="col">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                            <label>Agree to terms and conditions</label>
                            <div class="invalid-feedback">You must agree before submitting.</div>
                        </div>
                    </div>
                </div> 
                <div class="row justify-content-end">
                    <!-- <div class="col-md-4"></div> -->
                    <div class="col-md-2">
                        <button name="save_type" value="draft" class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3" type="submit">
                            Save as Draft
                        </button>
                    </div>
                    <div class="col-md-2"><button name="save_type"  value="save" class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                        type="submit">
                    Save 
                </button></div>
                </div>
            {% endif %}
        </form>

        <div class="modal fade" id="crperiod">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h5 class="m-3">New Credit Period</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form id="crdt_prd_form" action="{% url 'credit_period2' %}" method="post" autocomplete="off">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-2 mt-2"></div>
                                    <div class="col-md-5 mt-2">
                                        <input type="number" name="newperiod" class="form-control">
                                    </div>
                                    <div class="col-md-2 mt-2">
                                        <button class="btn btn-outline-info text-grey mb-3" type="submit" id="saveCrdtprdBtn">Save</button>
                                    </div>
                                </div>
                            </form>  
                        </div>
                    </div>
                </div>   
            </div>
        </div> 

        <div class="modal fade" id="porderno">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h3 class="m-3">Prchase Order#</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Your Purchase Order number are set on auto-generate to save your time Are you shure about changing the setting ?</p>
                    
                        <div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" value="Taxable" name="taxpref">
                                <label class="form-check-label">Continue auto generated purchase order number</label>
                            </div>

                            <div class="form-check">
                                <input type="radio" class="form-check-input" value="Tax Exempt" name="taxpref">
                                <label class="form-check-label">I will add them manually each time</label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-info" data-dismiss="modal">Save</button>
                        <button type="button" class="btn btn-outline-info" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>    

        <div class="modal fade" id="newvendor">
            <div class="modal-dialog modal-xl">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h3 class="m-3">New Vendor</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form id="newvendorform" action="createvendor1" method="post" class="needs-validation" novalidate autocomplete="off">
                                {% csrf_token %}
                                {% if user.is_authenticated %}
                                    <div class="row">
                                        <div class="col-md-3 mt-2">
                                            <label for="validationCustom01">Title</label>
                                            <select name="title" id="title" class="form-control">
                                                <option value="Mr">Mr</option>
                                                <option value="Mrs">Mrs</option>
                                                <option value="Miss">Miss</option>
                                                <option value="Ms">Ms</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3 mt-2">
                                            <label for="validationCustom02">First name</label>
                                            <input type="text" class="form-control" id="validationCustom02" name="firstname"
                                                   required>
                                            <div class="valid-feedback">Looks good!</div>
                                        </div>
                                        <div class="col-md-3 mt-2">
                                            <label for="validationCustom02">Last name</label>
                                            <input type="text" class="form-control" id="validationCustom02" name="lastname">
                                        </div>
                                        <div class="col-md-3 mt-2">
                                            <label for="validationCustom03">Company</label>
                                            <input type="text" class="form-control" id="validationCustom03" name="company_name">
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-4 mt-3">
                                            <label for="validationCustom03">Email</label>
                                            <input type="email" class="form-control" id="validationCustom03" name="email"
                                                placeholder="finsys@mail.com">
                                        </div>
                                        <div class="col-md-4 mt-3">
                                            <label for="validationCustom03">Website</label>
                                            <input type="text" class="form-control" id="validationCustom03"
                                                placeholder="www.finsys.com" name="website">
                                        </div>
                                        <div class="col-md-4 mt-3">
                                            <label for="validationCustom01">Mobile</label>
                                            <input type="text" class="form-control" id="validationCustom01"
                                                placeholder="Mobile number" maxlength="10"
                                                name="mobile">
                                        </div>
                                    </div>
                                    <hr>
                                    <center><h4><b>Other Options</b></h4></center>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-4 mt-3">
                                            <label for="validationCustom04">GST Treatment</label>
                                            <select class="form-control" id="gsttyp" name="gsttype" onchange="showgsttyp()"
                                                onclick="hidinput('hello', this)" required>
                                                <option selected hidden value="">Select GST Treatment</option>
                                                <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                                <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                                <option value="Unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                                <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                                <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                                <!-- <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                                <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                                <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option> -->
                                            </select>
                                            <!-- <div class="hide" id="regular"><label><i>(Business that is registered under gst)</i></label></div>
                                            <div class="hide" id="comp"><label>&nbsp;<i>(Business that is registered under composition scheme in gst)</i></label></div>
                                            <div class="hide" id="unreg"><label>&nbsp;&nbsp;&nbsp;<i>(Business that has not been registered under gst)</i></label></div>
                                            <div class="hide" id="overseas"><label>&nbsp;&nbsp;&nbsp;<i>(Import/Export of supply outside india)</i></label></div>
                                            <div class="hide" id="sez"><label>&nbsp;&nbsp;&nbsp;<i>(Business that is located in a special economic zone of india or a SEZ developer)</i></label></div>
                                            <div class="hide" id="demed"><label>&nbsp;&nbsp;&nbsp;<i>(Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</i></label></div>
                                            <div class="hide" id="taxdud"><label>&nbsp;&nbsp;<i>(State of central gov,government agencies or local authority)</i></label></div>
                                            <div class="hide" id="sezdev"><label>&nbsp;&nbsp;<i>(A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</i></label></div> -->
                                        </div>
                                          
                                        <div class="col-md-4 mt-3">
                                            <div id="hello">
                                                <label for="validationCustom05">GSTIN</label>
                                                <input type="text" class="form-control" onchange="checkgst(this)"
                                                    id="validationCustom05" name="gstin"
                                                    placeholder="29APPCK7465F1Z1">
                                                <a href="https://services.gst.gov.in/services/searchtp"
                                                    target="_blank" style="color:#3dd5f3">Get Taxpayer details ?</a>
                                                <div class="text-danger m-2" id="warngst"></div>
                                            </div>
                                        </div>
                                        <!-- <div class="col-md-4 mt-3 hide" id="legal">
                                            <label for="">Business Legal Name</label>
                                            <input type="text" class="form-control" name="">
                                        </div>
                                        <div class="col-md-4 mt-3 hide" id="trade">
                                            <label for="">Business Trade Name</label>
                                             <input type="text" class="form-control" name="">
                                         </div> -->
                                        <div class="col-md-4 mt-3">
                                            <label for="validationCustom03">PAN NO</label>
                                            <input type="text" class="form-control" id="" name="panno"
                                            placeholder="APPCK7465F">
                                        </div>
            
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3 mt-2">
                                           <label for="">Place of Supply</label>
                                            <select class="form-control" id="" name="sourceofsupply">
                                                <option value="Nill"></option>
                                                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                                <option value="[AS] Assam">[AS] Assam</option>
                                                <option value="[BR] Bihar">[BR] Bihar</option>
                                                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                                <option value="[DL] Delhi">[DL] Delhi</option>
                                                <option value="[GA] Goa">[GA] Goa</option>
                                                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                                <option value="[HR] Haryana">[HR] Haryana</option>
                                                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                                <option value="[KA] Karnataka">[KA] Karnataka</option>
                                                <option value="[KL] Kerala">[KL] Kerala</option>
                                                <option value="[LA] Ladakh">[LA] Ladakh</option>
                                                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                                <option value="[MN] Manipur">[MN] Manipur</option>
                                                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                                <option value="[NL] Nagaland">[NL] Nagaland</option>
                                                <option value="[OD] Odisha">[OD] Odisha</option>
                                                <option value="[PY] Puducherry">[PY] Puducherry</option>
                                                <option value="[PB] Punjab">[PB] Punjab</option>
                                                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                                <option value="[SK] Sikkim">[SK] Sikkim</option>
                                                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                                <option value="[TS] Telangana">[TS] Telangana</option>
                                                <option value="[TR] Tripura">[TR] Tripura</option>
                                                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                                <option value="[WB] West Bengal">[WB] West Bengal</option>
                                                <option value="[OT] Other Territory">[OT] Other Territory</option>
                                            </select>
                                        </div>
                                        <!-- <div class="col-md-3 mt-2 hide" id="tax">
                                            <label for="">Tax Preference</label><br>
                                            <div class="form-check form-check-inline">
                                                <input type="radio" class="form-check-input" value="Taxable" name="taxpref">
                                                <label class="form-check-label">Taxable</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input type="radio" class="form-check-input" value="Tax Exempt" name="taxpref">
                                                <label class="form-check-label">Tax Exempt</label>
                                            </div>
                                        </div> -->
                                        
                                        <div class="col-md-3 mt-2">
                                            <label for="">Currency</label>
                                            <div class="d-flex">
                                                <select name="currency" id="" class="form-control">
                                                    <option selected value="INR - Indian Rupee">INR - Indian Rupee</option>
                                                </select>
                                                <a href="#">
                                                    <button type="button" class="btn btn-outline-secondary ml-1">+</button>
                                                </a> 
                                            </div>   
                                        </div>
                                        
                                        <div class="col-md-3 mt-2">
                                           <label for="">Opening Balance</label>
                                           <div class="d-flex">
                                                <select class="form-control w-50" name="opb_type" required>
                                                    <option value="" hidden>Type</option>
                                                    <option value="Debit">Debit</option>
                                                    <option value="Credit">Credit</option>
                                                </select>
                                                <input type="number" class="form-control" name="openingbalance" required>
                                            </div>
                                        </div>
                                        <div class="col-md-3 mt-2">
                                           <label for="">Payment Terms</label>
                                           <div class="d-flex">
                                            <select class="form-control" name="paymentterms">
                                                <option value="Nill"></option>
                                                <option value="Due on Receipt">Due on Receipt</option>
                                                <option value="60">NET 60</option>
                                                <option value="45">NET 45</option>
                                                <option value="30">NET 30</option>
                                                {% for pd in cpd %}
                                                    <option value="{{ pd.newperiod }}">NET {{ pd.newperiod }}</option>
                                                {% endfor %}
                                            </select>
                                            <a class="btn btn-outline-secondary ml-1" data-target="#crperiod1" data-toggle="modal">+</a>
                                        </div> 
                                        </div>
                                        <div class="row" style="display: none;">
                                            <div class="col-md-3 mt-2" >
                                                <label for="">Date</label>
                                                <input type="date" id="date2" class="form-control" name="date">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="display: none;">
                                        <div class="col-md-3 mt-2" >
                                            <label for="">Date</label>
                                            <input type="date" id="dt" class="form-control" name="date">
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-6 mt-5">
                                            <div class="row">
                                                <div class="col-md-12 card-title">
                                                    <h5 class="mb-0">Billing Address</h5>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 mt-3">
                                                    <div class="form-row">
                                                        <label for="street">Street</label>
                                                        <textarea class="form-control street" id="street" name="street"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="city">City</label>
                                                        <input type="text" class="form-control" id="city"
                                                            name="city"
                                                            placeholder="City">
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="state">State</label>
                                                        <select type="text" class="form-control" id="state" name="state">
                                                            <option value="" selected>Choose</option>
                                                            <option value="None Of This">None Of This</option>
                                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                            </option>
                                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                            <option value="Assam">Assam</option>
                                                            <option value="Bihar">Bihar</option>
                                                            <option value="Chandigarh">Chandigarh</option>
                                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                                            <option value="Delhi">Delhi</option>
                                                            <option value="Goa">Goa</option>
                                                            <option value="Gujarat">Gujarat</option>
                                                            <option value="Haryana">Haryana</option>
                                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                            <option value="Jharkhand">Jharkhand</option>
                                                            <option value="Karnataka">Karnataka</option>
                                                            <option value="Kerala">Kerala</option>
                                                            <option value="Ladakh">Ladakh</option>
                                                            <option value="Lakshadweep">Lakshadweep</option>
                                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                                            <option value="Maharashtra">Maharashtra</option>
                                                            <option value="Manipur">Manipur</option>
                                                            <option value="Meghalaya">Meghalaya</option>
                                                            <option value="Mizoram">Mizoram</option>
                                                            <option value="Nagaland">Nagaland</option>
                                                            <option value="Odisha">Odisha</option>
                                                            <option value="Puducherry">Puducherry</option>
                                                            <option value="Punjab">Punjab</option>
                                                            <option value="Rajasthan">Rajasthan</option>
                                                            <option value="Sikkim">Sikkim</option>
                                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                                            <option value="Telangana">Telangana</option>
                                                            <option value="Tripura">Tripura</option>
                                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                                            <option value="Uttarakhand">Uttarakhand</option>
                                                            <option value="West Bengal">West Bengal</option>
                                                            <option value="Other Territory">Other Territory</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="pinco">Pin Code</label>
                                                        <input type="text" class="form-control" id="pinco"
                                                            name="pincode" maxlength="6"
                                                            placeholder="PIN Code">
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="country">Country</label>
                                                        <input type="text" class="form-control" id="country"
                                                            name="country"
                                                            placeholder="Country">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mt-5">
                                            <div class="row">
                                                <div class="col-md-12 d-flex">
                                                    <h5>Shipping Address</h5>
                                                    <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins()" id="okay"
                                                           name="okay">
                                                    <label class="ml-2 mt-1 ml-2" for="okay">Same As Billing Address</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 mt-3">
                                                    <div class="form-row">
                                                        <label for="shipstreet">Street</label>
                                                        <textarea class="form-control" id="shipstreet"
                                                            name="shipstreet"
                                                            ></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="shipcity">City</label>
                                                        <input type="text" class="form-control" id="shipcity"
                                                            name="shipcity" placeholder="City">
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="shipstate">State</label>
                                                        <select type="text" class="form-control" id="plosu" name="shipstate">
                                                            <option id="shipst" selected>Choose</option>
                                                            <option value="None Of This">None Of This</option>
                                                            <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                            </option>
                                                            <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                            <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                            <option value="Assam">Assam</option>
                                                            <option value="Bihar">Bihar</option>
                                                            <option value="Chandigarh">Chandigarh</option>
                                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                                            <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                            <option value="Damn anad Diu">Damn anad Diu</option>
                                                            <option value="Delhi">Delhi</option>
                                                            <option value="Goa">Goa</option>
                                                            <option value="Gujarat">Gujarat</option>
                                                            <option value="Haryana">Haryana</option>
                                                            <option value="Himachal Predesh">Himachal Predesh</option>
                                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                            <option value="Jharkhand">Jharkhand</option>
                                                            <option value="Karnataka">Karnataka</option>
                                                            <option value="Kerala">Kerala</option>
                                                            <option value="Ladakh">Ladakh</option>
                                                            <option value="Lakshadweep">Lakshadweep</option>
                                                            <option value="Madhya Predesh">Madhya Predesh</option>
                                                            <option value="Maharashtra">Maharashtra</option>
                                                            <option value="Manipur">Manipur</option>
                                                            <option value="Meghalaya">Meghalaya</option>
                                                            <option value="Mizoram">Mizoram</option>
                                                            <option value="Nagaland">Nagaland</option>
                                                            <option value="Odisha">Odisha</option>
                                                            <option value="Puducherry">Puducherry</option>
                                                            <option value="Punjab">Punjab</option>
                                                            <option value="Rajasthan">Rajasthan</option>
                                                            <option value="Sikkim">Sikkim</option>
                                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                                            <option value="Telangana">Telangana</option>
                                                            <option value="Tripura">Tripura</option>
                                                            <option value="Uttar Predesh">Uttar Predesh</option>
                                                            <option value="Uttarakhand">Uttarakhand</option>
                                                            <option value="West Bengal">West Bengal</option>
                                                            <option value="Other Territory">Other Territory</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="shippinco">Pin Code</label>
                                                        <input type="text" class="form-control" id="shippinco"
                                                            name="shippincode"
                                                            placeholder="PIN Code">
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mt-3">
                                                    <div class="form-row">
                                                        <label for="shipcountry">Country</label>
                                                        <input type="text" class="form-control" id="shipcountry"
                                                            name="shipcountry"
                                                            placeholder="Country">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                                <label>Agree to terms and conditions</label>
                                                <div class="invalid-feedback">You must agree before submitting.</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4"></div>
                                        <div class="col-md-4">
                                            <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                                    type="submit" id="vendorsave">
                                                Submit form
                                            </button>
                                        </div>
                                        <div class="col-md-4"></div>
                                    </div>
                                {% endif %}
                            </form>
                        </div>
                    </div>
                </div>
            </div>  
        </div>   
        <div class="modal fade" id="crperiod1">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h5 class="m-3">New Payment Terms</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form action="{% url 'credit_period1' %}" method="post" autocomplete="off">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-2 mt-2"></div>
                                    <div class="col-md-5 mt-2">
                                        <input type="number" name="newperiod" class="form-control">
                                    </div>
                                    <div class="col-md-2 mt-2">
                                        <button class="btn btn-outline-info text-grey mb-3" type="submit">Save</button>
                                    </div>
                                </div>
                            </form>  
                        </div>
                    </div>
                </div>   
            </div>
        </div> 

        <div class="modal fade" id="newcustomer">
            <div class="modal-dialog modal-xl">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h3 class="m-3">New Customer</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form id="customerForm" action="createcustomer1" method="POST">{% csrf_token %}
                                <div class="row">
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom01">Title</label>
                                        <select name="title" id="title" class="form-control" id="validationCustom01">
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Miss">Miss</option>
                                            <option value="Ms">Ms</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom02">First name</label>
                                        <input type="text" class="form-control" id="validationCustom02" name="firstname" required>   
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom02">Last name</label>
                                        <input type="text" class="form-control" id="validationCustom02" name="lastname">    
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom03">Company</label>
                                        <input type="text" class="form-control" name="company">
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom03">Location</label>
                                        <input type="text" class="form-control" id="validationCustom03" name="location">
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom05">Opening Balance</label>
                                        <input type="text" class="form-control" value=""  name="openbalance">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom04">GST type</label>
                                        <select class="form-control" id="gsttyp1" name="gsttype"
                                                onclick="hidinput1('hello1', this)">
                                            <option selected disabled value="">Choose..</option>
                                            <option value="Registered Business - Regular">Registered Business - Regular</option>
                                            <option value="Registered Business - Composition">Registered Business - Composition</option>
                                            <option value="Unregistered Business">Unregistered Business</option>
                                            <option value="Overseas">Overseas</option>
                                            <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ)</option>
                                            <option value="Demed Exports">Demed Exports</option>
                                            <option value="Tax Deductor">Tax Deductor</option>
                                            <option value="SEZ Developer">SEZ Developer</option>
                                            </select>
                                        <div class="invalid-feedback">Please select a valid registration type.</div>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <div id="hello1">
                                            <label for="validationCustom05">GSTIN</label>
                                            <input type="text" class="form-control" onchange="checkgst1(this)"
                                                id="validationCustom05" name="gstin"
                                                placeholder="29APPCK7465F1Z1">
                                            <a href="https://services.gst.gov.in/services/searchtp"
                                                target="_blank" style="color:#3dd5f3">Get Taxpayer details ?</a>
                                            <div class="text-danger m-2" id="warngst1"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom03">PAN NO</label>
                                        <input type="text" class="form-control" id="validationCustom03" name="panno"
                                               onchange="checkpan(this)" placeholder="APPCK7465F">
                                        <div class="text-danger m-2" id="warnpan"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom03">Email</label>
                                        <input type="email" class="form-control" id="validationCustom03" name="email"
                                            placeholder="finsys@mail.com">
                                        <div class="invalid-feedback">Please provide a valid Email</div>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom03">Website</label>
                                        <input type="text" class="form-control" id="validationCustom03"
                                               placeholder="www.finsys.com" onchange="checkweb(this)" name="website">
                                        <div id="warnweb" class="text-danger"></div>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="validationCustom01">Mobile</label>
                                        <input type="text" class="form-control" id="validationCustom01"
                                               onchange="checkphone(this)" name="mobile">
                                        <div class="text-danger m-2" id="warnphone"></div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-6 mt-5">
                                        <div class="row">
                                            <div class="col-md-12 card-title">
                                                <h5 class="mb-0">Billing Address</h5>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 mt-3">
                                                <div class="form-row">
                                                    <label for="street">Street</label>
                                                    <textarea class="form-control street" id="street1" name="street"></textarea>
                                                    <div class="invalid-feedback">Please provide a valid Street</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="city">City</label>
                                                    <input type="text" class="form-control" id="city1" name="city" placeholder="City">
                                                    <div class="invalid-feedback">Please provide a valid City</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="state">State</label>
                                                    <select type="text" class="form-control" id="state1" name="state">
                                                        <option value="" selected>Choose</option>
                                                        <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                        </option>
                                                        <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                        <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                        <option value="Assam">Assam</option>
                                                        <option value="Bihar">Bihar</option>
                                                        <option value="Chandigarh">Chandigarh</option>
                                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                                        <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                        <option value="Damn anad Diu">Damn anad Diu</option>
                                                        <option value="Delhi">Delhi</option>
                                                        <option value="Goa">Goa</option>
                                                        <option value="Gujarat">Gujarat</option>
                                                        <option value="Haryana">Haryana</option>
                                                        <option value="Himachal Predesh">Himachal Predesh</option>
                                                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                        <option value="Jharkhand">Jharkhand</option>
                                                        <option value="Karnataka">Karnataka</option>
                                                        <option value="Kerala">Kerala</option>
                                                        <option value="Ladakh">Ladakh</option>
                                                        <option value="Lakshadweep">Lakshadweep</option>
                                                        <option value="Madhya Predesh">Madhya Predesh</option>
                                                        <option value="Maharashtra">Maharashtra</option>
                                                        <option value="Manipur">Manipur</option>
                                                        <option value="Meghalaya">Meghalaya</option>
                                                        <option value="Mizoram">Mizoram</option>
                                                        <option value="Nagaland">Nagaland</option>
                                                        <option value="Odisha">Odisha</option>
                                                        <option value="Puducherry">Puducherry</option>
                                                        <option value="Punjab">Punjab</option>
                                                        <option value="Rajasthan">Rajasthan</option>
                                                        <option value="Sikkim">Sikkim</option>
                                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                                        <option value="Telangana">Telangana</option>
                                                        <option value="Tripura">Tripura</option>
                                                        <option value="Uttar Predesh">Uttar Predesh</option>
                                                        <option value="Uttarakhand">Uttarakhand</option>
                                                        <option value="West Bengal">West Bengal</option>
                                                        <option value="Other Territory">Other Territory</option>
                                                    </select>
                                                    <div class="invalid-feedback">Please provide a valid State</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="pinco">Pin Code</label>
                                                    <input type="text" class="form-control" id="pinco1"
                                                           name="pincode"
                                                           placeholder="PIN code">
                                                    <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="country">Country</label>
                                                    <input type="text" class="form-control" id="country1"
                                                           name="country"
                                                           placeholder="Country">
                                                    <div class="invalid-feedback">Please provide a valid Country</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mt-5">
                                        <div class="row">
                                            <div class="col-md-12 d-flex">
                                                <h5>Shipping Address</h5>
                                                <input class="ml-4 mt-2 ml-2" type="checkbox" onclick="poppins1()" id="okay1"
                                                       name="okay1">
                                                <label class="ml-2 mt-1 ml-2" for="okay1">Same As Billing Address</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 mt-3">
                                                <div class="form-row">
                                                    <label for="shipstreet">Street</label>
                                                    <textarea class="form-control" id="shipstreet1" name="shipstreet"></textarea>
                                                    <div class="invalid-feedback">Please provide a valid Street</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="shipcity">City</label>
                                                    <input type="text" class="form-control" id="shipcity1"
                                                           name="shipcity"
                                                           placeholder="City">
                                                    <div class="invalid-feedback">Please provide a valid City</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="shipstate">State</label>
                                                    <select type="text" class="form-control" id="plosu" name="shipstate">
                                                        <option id="shipst1" selected>Choose</option>
                                                        <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                                        </option>
                                                        <option value="Andhra Predhesh">Andhra Predhesh</option>
                                                        <option value="Arunachal Predesh">Arunachal Predesh</option>
                                                        <option value="Assam">Assam</option>
                                                        <option value="Bihar">Bihar</option>
                                                        <option value="Chandigarh">Chandigarh</option>
                                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                                        <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                                        <option value="Damn anad Diu">Damn anad Diu</option>
                                                        <option value="Delhi">Delhi</option>
                                                        <option value="Goa">Goa</option>
                                                        <option value="Gujarat">Gujarat</option>
                                                        <option value="Haryana">Haryana</option>
                                                        <option value="Himachal Predesh">Himachal Predesh</option>
                                                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                        <option value="Jharkhand">Jharkhand</option>
                                                        <option value="Karnataka">Karnataka</option>
                                                        <option value="Kerala">Kerala</option>
                                                        <option value="Ladakh">Ladakh</option>
                                                        <option value="Lakshadweep">Lakshadweep</option>
                                                        <option value="Madhya Predesh">Madhya Predesh</option>
                                                        <option value="Maharashtra">Maharashtra</option>
                                                        <option value="Manipur">Manipur</option>
                                                        <option value="Meghalaya">Meghalaya</option>
                                                        <option value="Mizoram">Mizoram</option>
                                                        <option value="Nagaland">Nagaland</option>
                                                        <option value="Odisha">Odisha</option>
                                                        <option value="Puducherry">Puducherry</option>
                                                        <option value="Punjab">Punjab</option>
                                                        <option value="Rajasthan">Rajasthan</option>
                                                        <option value="Sikkim">Sikkim</option>
                                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                                        <option value="Telangana">Telangana</option>
                                                        <option value="Tripura">Tripura</option>
                                                        <option value="Uttar Predesh">Uttar Predesh</option>
                                                        <option value="Uttarakhand">Uttarakhand</option>
                                                        <option value="West Bengal">West Bengal</option>
                                                        <option value="Other Territory">Other Territory</option>
                                                    </select>
                                                    <div class="invalid-feedback">Please provide a valid State</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="shippinco">Pin Code</label>
                                                    <input type="text" class="form-control" id="shippinco1"
                                                           name="shippincode"
                                                           placeholder="PIN code">
                                                    <div class="invalid-feedback">Please provide a valid Pin Code</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mt-3">
                                                <div class="form-row">
                                                    <label for="shipcountry">Country</label>
                                                    <input type="text" class="form-control" id="shipcountry1"
                                                           name="shipcountry"
                                                           placeholder="Country">
                                                    <div class="invalid-feedback">Please provide a valid Country</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck">
                                            <label>Agree to terms and conditions</label>
                                            <div class="invalid-feedback">You must agree before submitting.</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                      <div class="col-md-4"></div>
                                    <div class="col-md-4">
                                        <button type="submit" class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3" id="saveCustomerBtn">
                                            Submit form
                                        </button>
                                    </div>
                                    <div class="col-md-4"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>  
        </div>   
        
        <div class="modal fade" id="newitem"> 
            <div class="modal-dialog modal-xl">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h3 class="m-3">New Item</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form id="newitemform" action="{% url 'create_item1' %}" method="post" class="needs-validation" novalidate autocomplete="off">
                                {% csrf_token %}
        
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <label for="validationCustom02">Name</label>
                                        <input type="text" class="form-control" id="validationCustom02" name="name" required>   
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="validationCustom03">Type</label>
                                        <select name="type" class="form-control" id="validationCustom01">
                                            <option >Choose...</option>
                                            <option value="Goods">Goods</option>
                                            <option value="Services">Services</option>
                                        </select>   
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="validationCustom03">Unit</label>
                                        <div class="d-flex">
                                            <select class="custom-select" name="unit" id="validationCustom04">
                                                <option selected disabled value="">Choose...</option>
                                                <option id="new_unit"></option>
                                                {% for a in unit %}
                                                    <option style="text-transform:Uppercase;">{{ a.unit_symbol}}-{{ a.name }}</option>
                                                {% endfor %}
                                                <option>BAG-BAGS</option>
                                                <option>BAL-BALE</option>
                                                <option>BDL-BUNDLES</option>
                                                <option>BKL-BUCKLES</option>
                                                <option>BOX-BOX</option>
                                                <option>BOU-BILLIONS OF UNITS</option>
                                                <option>BTL-BOTTLES</option>
                                                <option>BUN-BUNCHES</option>
                                                <option>CAN-CANS</option>
                                                <option>CBM-CUBIC METER</option>
                                                <option>CMS-CENTIMETER</option>
                                                <option>CCM-CUBIC CENTIMETER</option>
                                                <option>CTN-CARTONS</option>
                                                <option>DOZ-DOZEN</option>
                                                <option>DRM-DRUM</option>
                                                <option>GGR-GREAT GROSS</option>
                                                <option>GMS-GRAMS</option>
                                                <option>GRS-GROSS</option>
                                                <option>GYD-GROSS YARDS</option>
                                                <option>KGS-KILOGRAMS</option>
                                                <option>KLR-KILOLITER</option>
                                                <option>KME-KILOMETRE</option>
                                                <option>MTS Metric ton</option>
                                                <option>MLT-MILLILITRE</option>
                                                <option>MTR-METERS</option>
                                                <option>NOS-NUMBER</option>
                                                <option>PAC-PACKS</option>
                                                <option>PCS-PIECES</option>
                                                <option>PRS-PAIRS</option>
                                                <option>QTL-QUINTAL</option>
                                                <option>ROL-ROLLS</option>
                                                <option>SQF-SQUARE FEET</option>
                                                <option>SET-SETS</option>
                                                <option>SQM-SQUARE METERS</option>
                                                <option>SQY-SQUARE YARDS</option>
                                                <option>TBS-TABLETS</option>
                                                <option>TGM-TEN GROSS</option>
                                                <option>THD-THOUSANDS</option>
                                                <option>TON-TONNES</option>
                                                <option>TUB-TUBES</option>                                            
                                                <option>UNT-UNITS</opion>
                                                <option>UGS-US GALLONS</option>
                                                <option>YDS-YARDS</otion> 
                                            </select>
                                            <a class="btn btn-outline-secondary ml-1" data-target="#unit" data-toggle="modal">+</a>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <label for="validationCustom02">HSN Code</label>
                                        <input type="text" name="hsn" class="form-control" placeholder="Enter a valid HSN code" required>  
                                    </div>
                                    <div class="col-md-3 mt-5"><label for="">Tax Preference : </label></div>
                                    <div class="col-md-2 mt-5">
                                        <div class="form-check">
                                            <input class="form-check-input" name="taxref" type="checkbox" value="Taxable" id="inclusive"
                                            checked >Taxable
                                        </div>
                                    </div>
                                    <div class="col-md-2 mt-5">
                                        <div class="form-check">
                                            <input class="form-check-input" name="taxref" type="checkbox" value="Non Taxable" >Non Taxable
                                        </div>
                                    </div>
                                    
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <h5>Purchase Price Details</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <label for="">Purchase Price</label>
                                        <div class="d-flex">
                                            <p class="form-control" style="width:60px">INR</p>
                                            <input type="text" name="pcost" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="">Account</label>
                                        <select name="pur_account" class="form-control">
                                            {% for a in acc1 %}
                                                <option value="{{ a.name }}">{{ a.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="">Description</label>
                                        <textarea class="form-control" name="pur_desc"></textarea>  
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <h5>Sales Price Details</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <label for="">Sales Price</label>
                                        <div class="d-flex">
                                            <p class="form-control" style="width:60px">INR</p>
                                            <input type="text" name="salesprice" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="">Account</label>
                                        <select name="sale_account" class="form-control">
                                            <option value="Sales">Sales</option>
                                            {% for a in acc2 %}
                                                <option value="{{ a.name }}">{{ a.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <label for="">Description</label>
                                        <textarea class="form-control" name="sale_desc"></textarea>  
                                    </div>
                                </div>   
                                <hr> 
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <h5>Tax Rate Details</h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mt-2">
                                        <label for="">Intra State Tax Rate</label>
                                        <select name="intra_st" class="form-control">
                                            <option selected >Choose...</option>
                                            <option value=0>GST 0 (0%)</option>
                                            <option value=5>GST 5 (5%)</option>
                                            <option value=12>GST 12 (12%)</option>
                                            <option value=18>GST 18 (18%)</option>
                                            <option value=28>GST 28 (28%)</option>
                                            <option value=0>Out of Scope(0%)</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mt-2">
                                        <label for="">Inter State Tax Rate</label>
                                        <select name="inter_st" class="form-control">
                                            <option selected >Choose...</option>
                                            <option value=0>IGST 0 (0%)</option>
                                            <option value=5>IGST 5 (5%)</option>
                                            <option value=12>IGST 12 (12%)</option>
                                            <option value=18>IGST 18 (18%)</option>
                                            <option value=28>IGST 28 (28%)</option>
                                            <option value=0>Out of Scope(0%)</option>
                                        </select>   
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <h5>Inventory</h5>
                                        <div class="form-check">
                                            <input class="form-check-input" onclick="ShowHideDiv(this)" type="checkbox"  id="track">
                                            <label class="form-check-label" for="track" >
                                            Track Inventory
                                            </label>
                                        </div>  
                                    </div>
                                </div> 
                                <div class="row"  id="inventorytrack" style="display: none">
                                    <div class="col-md-6 mt-2">
                                        <label for="">Inventory Account</label>
                                        <select name="invacc" class="form-control">
                                            <option selected value="">Choose...</option>
                                            <option value="Inventory Assets">Inventory Assets</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mt-2">
                                        <label for="">Stock on hand</label>
                                        <input type="number" name="stock" value="0" class="form-control">
                                    </div>
                                
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-4 mt-2">
                                        <label for="" name style="color: white;">Active / Inactive</label>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <div class="form-check">
                                            <input class="form-check-input" value="Active" type="radio" name="status" id="flexRadioDefault1"
                                            checked>
                                            <label class="form-check-label" for="flexRadioDefault1" >
                                            Active
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mt-2">
                                        <div class="form-check">
                                            <input class="form-check-input" value="Inactive" type="radio" name="status" id="flexRadioDefault2">
                                            <label class="form-check-label" for="flexRadioDefault2">
                                            Inactive
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-3" style="display: none;">
                                        <input type="date" name="itmdate" id="date3" class="form-control">
                                    </div>
                                </div>
                                <hr>
                                <div class="row mt-3">
                                    <div class="col">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                            <label>Agree to terms and conditions</label>
                                            <div class="invalid-feedback">You must agree before submitting.</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4"></div>
                                    <div class="col-md-4">
                                        <button class="btn btn-outline-info rounded-pill text-grey w-100 mt-3 mb-3"
                                                type="submit" id="saveitembtn">
                                            Submit form
                                        </button>
                                    </div>
                                    <div class="col-md-4"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div> 
        </div> 
        
        <div class="modal fade" id="unit">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #213b52;">
                    <div class="modal-header">
                        <h5 class="m-3">Unit Create</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card p-3 m-3">
                            <form id="newunitform" method="post" action="create_unit1" autocomplete="off">
                                {% csrf_token %}
                                <div class="row mt-2 mb-2">
                                    <div class="col-md-6">
                                        <label for="acctyp">Unit Symbol</label>
                                        <input type="text" name="usymbol" id="select1" class="custom-select-md form-control w-100">        
                                    </div>
                                    <div class="col-md-6">
                                        <label for="name">Name</label>
                                        <input name="uname" id="name" class="custom-select-md form-control w-100">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4"></div>
                                    <div class="col-md-4 mt-4 mb-4">
                                        <button type="submit" class="btn btn-outline-info rounded-pill w-100" id="saveunitbtn">Create</button>
                                    </div>
                                    <div class="col-md-4"></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>   
            </div>
        </div> 

    </div>
</div>
</div>

<script>
document.getElementById('paytype').addEventListener('change', function () {
    var selectedOption = this.options[this.selectedIndex];
    var selectedValue = selectedOption.value;

    document.getElementById('chequeNumberField').style.display = 'none';
    document.getElementById('upiField').style.display = 'none';
    document.getElementById('accountNumberField').style.display = 'none';

    // Reset input values
    document.getElementById('chequeNumber').value = '';
    document.getElementById('upiNumber').value = '';
    document.getElementById('accountNumber').value = '';

    if (selectedValue === 'Cheque') {
        document.getElementById('chequeNumberField').style.display = 'block';
    } else if (selectedValue === 'UPI') {
        document.getElementById('upiField').style.display = 'block';
    } else if (selectedOption.getAttribute('data-account')) {
        document.getElementById('accountNumberField').style.display = 'block';
        document.getElementById('accountNumber').value = selectedOption.getAttribute('data-account');
    }
});

// Add form validation
document.getElementById('purchaseOrderForm').addEventListener('submit', function (event) {
    var selectedValue = document.getElementById('paytype').value;

    if (selectedValue === 'Cheque' && document.getElementById('chequeNumber').value.trim() === '') {
        alert('Please enter Cheque Number');
        event.preventDefault();
    }

    if (selectedValue === 'UPI' && document.getElementById('upiNumber').value.trim() === '') {
        alert('Please enter UPI Number');
        event.preventDefault();
    }

    if (document.getElementById('accountNumberField').style.display !== 'none' && document.getElementById('accountNumber').value.trim() === '') {
        alert('Please enter Account Number');
        event.preventDefault();
    }
});
</script>



<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$('#date').val(new Date().toJSON().slice(0,10));
$('#date1').val(new Date().toJSON().slice(0,10));
$('#dt').val(new Date().toJSON().slice(0,10));
$('#date3').val(new Date().toJSON().slice(0,10));

function checkDate() {
    var selectedText = document.getElementById('date1').value;
    var selectedDate = new Date(selectedText);
    var now = new Date();
    if (selectedDate < now) {
        alert("Date must be in the future");
    }
}
</script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
$(document).ready(function () {
    $('#customerForm').submit(function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            headers: {'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()},
            success: function (data) {
                console.log(data);

                var newCustomerName = data.firstname + " " + data.lastname;

                $("#cust_name").text(newCustomerName);

                $("#newcustomer").modal("hide");

                // Reset the form
                $('#customerForm')[0].reset();
            },
            error: function (data) {
                console.log(data);
            }
        });
    });
});

$(document).ready(function () {
    $('#newvendorform').submit(function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            headers: {'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()},
            success: function (data) {
                console.log(data);

                var newCustomerName = data.firstname + " " + data.lastname;

                $("#new_vndr").text(newCustomerName);

                $("#newvendor").modal("hide");

                // Reset the form
                $('#newvendorform')[0].reset();
            },
            error: function (data) {
                console.log(data);
            }
        });
    });
});

</script>

<script>
    $(document).ready(function () {
        $('#newunitform').on('submit', function (e) {
            e.preventDefault();
            var form = $(this);
            var url = form.attr('action');
            var method = form.attr('method');
            var data = form.serialize();

            $.ajax({
                url: url,
                method: method,
                data: data,
                success: function (response) {
                    // Update the dropdown with the new option
                    $('#new_unit').append($('<option>', {
                        value: response.unit_symbol + '-' + response.name,
                        text: response.unit_symbol + '-' + response.name
                    }));

                    // Close the modal
                    $('#unit').modal('hide');

                    // Reset the form inside the modal
                    form.trigger('reset');
                },
                error: function (error) {
                    console.log('Error creating unit:', error);
                }
            });
        });

        // If you have a separate button to close the modal, you can use the following code
        $('#unit').on('hidden.bs.modal', function () {
            $('#newunitform').trigger('reset');
        });
    });
</script>



<script>
$(document).ready(function () {
    $('#crdt_prd_form').submit(function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            headers: {'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()},
            success: function (data) {
                console.log(data);

                var newCrdtName = "NET " + data.newperiod; // Prepend "NET" to the value

                // Append the new option to the select element
                $('#termadd').append('<option value="' + data.newperiod + '">NET ' + data.newperiod + '</option>');

                $("#new_crprd").val(newCrdtName);

                $("#crperiod").modal("hide");

                // Reset the form
                $('#crdt_prd_form')[0].reset();
            },
            error: function (data) {
                console.log(data);
            }
        });
    });
});

$(document).ready(function () {
    $('#newitemform').submit(function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            headers: {'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()},
            success: function (data) {
                console.log(data);

                var newCustomerName = data.name;

                $("#new_itm").text(newCustomerName);
                $("#new_itm1").text(newCustomerName);

                $("#newitem").modal("hide");

                // Reset the form
                $('#newitemform')[0].reset();
            },
            error: function (data) {
                console.log(data);
            }
        });
    });
});


</script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        function poppins() {
            var chkbtn = document.getElementById('okay');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet').value = document.getElementById('street').value;
                document.getElementById('shipcity').value = document.getElementById('city').value;
                document.getElementById('shippinco').value = document.getElementById('pinco').value;
                document.getElementById('shipcountry').value = document.getElementById('country').value;
                document.getElementById('shipst').value = document.getElementById('state').value;
                document.getElementById('shipst').innerHTML = document.getElementById('state').value;
            } else {
                document.getElementById('shipstreet').value = '';
                document.getElementById('shipcity').value = '';
                document.getElementById('shipstate').value = '';
                document.getElementById('shippinco').value = '';
                document.getElementById('shipcountry').value = '';
            }
        }
        function poppins1() {
            var chkbtn = document.getElementById('okay1');
            if (chkbtn.checked == true) {
                document.getElementById('shipstreet1').value = document.getElementById('street1').value;
                document.getElementById('shipcity1').value = document.getElementById('city1').value;
                document.getElementById('shippinco1').value = document.getElementById('pinco1').value;
                document.getElementById('shipcountry1').value = document.getElementById('country1').value;
                document.getElementById('shipst1').value = document.getElementById('state1').value;
                document.getElementById('shipst1').innerHTML = document.getElementById('state1').value;
            } else {
                document.getElementById('shipstreet1').value = '';
                document.getElementById('shipcity1').value = '';
                document.getElementById('shipstate1').value = '';
                document.getElementById('shippinco1').value = '';
                document.getElementById('shipcountry1').value = '';
            }
        }
    </script>

    <script>
        function hidinput(divId, element) {
            if (element.value == 'Unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function checkgst(element) {
            var gstinput = element.value;
            var gstregexp = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput.match(gstregexp)) {
                document.getElementById('warngst').innerHTML = '';
            } else {
                document.getElementById('warngst').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }
        function hidinput1(divId, element) {
            if (element.value == 'Unregistered Business' || element.value == 'Consumer' || element.value == 'Overseas') {
                document.getElementById(divId).style.display = 'none';
            } else {
                document.getElementById(divId).style.display = 'block';
            }
        }

        function checkgst1(element) {
            var gstinput1 = element.value;
            var gstregexp1 = "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}";
            if (gstinput1.match(gstregexp1)) {
                document.getElementById('warngst1').innerHTML = '';
            } else {
                document.getElementById('warngst1').innerHTML = 'Please provide a valid GSTIN';
                alert('Please provide a valid GSTIN');
            }
        }

        function checkpan(element) {
            var paninput = element.value;
            var panregexp = ["[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"]
            if (paninput.match(panregexp)) {
                document.getElementById('warnpan').innerHTML = '';
            } else {
                document.getElementById('warnpan').innerHTML = 'Please provide a valid PAN Number';
                alert('Please provide a valid PAN Number')
            }
        }

        function checkweb(element) {
            var webinput = element.value;
            var webregexp = "www."
            if (webinput.startsWith(webregexp)) {
                document.getElementById('warnweb').innerHTML = '';
            } else {
                document.getElementById('warnweb').innerHTML = 'Please provide a valid Website Address';
                alert('Please provide a valid Website Address')
            }
        }

        function checkphone(element) {
            var phoneinput = element.value;
            var phoneregexp = "[0-9]{10}";
            if (phoneinput.match(phoneregexp)) {
                document.getElementById('warnphone').innerHTML = '';
            } else {
                document.getElementById('warnphone').innerHTML = 'Please provide a valid Phone Number';
                alert('Please provide a valid Phone Number')
            }
        }
    </script>
    <script>
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

    <script>
                $(document).ready(function() {
            $('#select').on('change', function() {
                select = $('#select').val();
                $.ajax({
                type: "GET",
                url: "{% url 'getvendordata' %}",
                data: {
                    id: select
                }
                }).done(function(response) {
                    var json_data = JSON.parse(response);
                    for (key in json_data) {
                        document.getElementById('email1').value = json_data[key]['email'];
                        document.getElementById('balance1').value = json_data[key][''];
                        document.getElementById('gstTreatment').value = json_data[key]['gsttype'];
                        document.getElementById('gstin1').value = json_data[key]['gstin'];
                        document.getElementById('billingaddress').value = json_data[key]['street'] + '\n' + json_data[key]['city'] + '\n' + json_data[key]['state'] + '\n' + json_data[key]['pincode'] + '\n' + json_data[key]['country'];    
                    }
                })
            });

    $(document).ready(function() {
    var gstinElement = $('#gstin1');
    var disabledElement = $('#disabled');

    function toggleGSTINVisibility() {
        var gstinValue = gstinElement.val();

        if (gstinValue && gstinValue.trim() !== '') {
            gstinElement.show();
            disabledElement.show();
        } else {
            gstinElement.hide();
            disabledElement.hide();
        }
    }
    toggleGSTINVisibility();

    $(document).ready(function () {
    $('#select').on('change', function () {
        var select = $('#select').val();
        $.ajax({
            type: "GET",
            url: "{% url 'getvendordata' %}",
            data: {
                id: select
            }
        }).done(function (response) {
            var json_data = JSON.parse(response);

            if (json_data.length > 0) {
                var vendorData = json_data[0];

                $('#email1').val(vendorData['email']);
                $('#gstTreatment').val(vendorData['gsttype']);
                $('#gstin1').val(vendorData['gstin']);
                $('#billingaddress').val(json_data[0]['street'] + '\n' + json_data[0]['city'] + '\n' + json_data[0]['state'] + '\n' + json_data[0]['pincode'] + '\n' + json_data[0]['country']);

                

                toggleGSTINVisibility();
            } else {
                $('#email1').val('');
                $('#gstTreatment').val('');
                $('#gstin1').val('');
                $('#billingaddress').val('');
                gstinElement.hide();
                disabledElement.hide();
            }
        });
    });
});

$('#select1').on('change', function() {
    var select1 = $('#select1').val();
    $.ajax({
        type: "GET",
        url: "{% url 'getdata2' %}",
        data: {
            id: select1
        }
    }).done(function(response) {
        var json_data = JSON.parse(response);

        if (json_data.length > 0) {
            var deliveryData = json_data[0];

            document.getElementById('deliverto').value = deliveryData['email'] + '\n' + deliveryData['mobile'] + '\n' + deliveryData['street'] + '\n' + deliveryData['city'] + '\n' + deliveryData['state'];

            document.getElementById('gstTreatment1').value = deliveryData['gsttype'];
            document.getElementById('gstin2').value = deliveryData['gstin'];

            // Toggle GSTIN visibility based on whether it has a value
            if (deliveryData['gstin']) {
                $('#disabled2').show();
            } else {
                $('#disabled2').hide();
            }
        } else {
            document.getElementById('deliverto').value = '';
            document.getElementById('gstTreatment1').value = '';
            document.getElementById('gstin2').value = '';
            $('#disabled2').hide();
        }
    });
});

$(document).ready(function () {
    // Hide GSTIN input field initially
    $('#disabled2').hide();

    $('#select1').on('change', function () {
        var select1 = $('#select1').val();
        var selectedOption = $('#select1 option:selected');
        var gstinValue = selectedOption.data('gstin');

        document.getElementById('deliverto').value = ''; // Clear other fields
        document.getElementById('gstTreatment1').value = '';

        if (gstinValue) {
            document.getElementById('gstin2').value = gstinValue;
            $('#disabled2').show(); // Show GSTIN input field
        } else {
            document.getElementById('gstin2').value = '';
            $('#disabled2').hide(); // Hide GSTIN input field
        }
    });
});
});
$('#termadd').on('change', function() {
                select = $('#termadd').val();
                $.ajax({
                        type: "GET",
                        url: "{% url 'getperiod' %}",
                        data: {
                        id: select
                    }
                }).done(function(response) {
                    var json_data = JSON.parse(response);
                    for (key in json_data) {
                    document.getElementById('duedat').value = json_data[key]['newdate'];
                    }
                }).fail(function() { });
            });

            var $select1 = $('#plosu'),
            $select2 = $('#tax1'),
            $select3 = $('#tax2'),
            $select4 = $('#tax3'),
            $select5 = $('#tax4'),
            $options = $select2.find('option'),
            $options1 = $select3.find('option'),
            $options2 = $select4.find('option'),
            $options3 = $select5.find('option');
            if ($options1.value == '{{ cmp1.state }}') {
                $options1.text = "{{ cmp1.state }}"
            }
            $select1.on('change', function() {
                if (this.value == "{{ cmp1.state }}") {
                    $select2.html($options.filter('[text="' + this.value + '"]'));
                    $select3.html($options1.filter('[text="' + this.value + '"]'));
                    $select4.html($options2.filter('[text="' + this.value + '"]'));
                    $select5.html($options3.filter('[text="' + this.value + '"]'));
                } 
                else {
                    $select2.html($options.filter('[text="' + " " + '"]'));
                    $select3.html($options1.filter('[text="' + " " + '"]'));
                    $select4.html($options2.filter('[text="' + " " + '"]'));
                    $select5.html($options3.filter('[text="' + " " + '"]'));
                }
            }).trigger('change');


        });
    </script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>





    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        function state(element) {
            if (element.value == "Kerala" ) {
                document.getElementById('cgst1').style.display = 'flex';
                document.getElementById('sgst1').style.display = 'flex';
                document.getElementById('igst1').style.display = 'none'; 
            } else {
                document.getElementById('cgst1').style.display = 'none';
                document.getElementById('sgst1').style.display = 'none';
                document.getElementById('igst1').style.display = 'flex';
            }
        }
    </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    $(document).ready(function(){
   $('#add').click(function(){
    var roinc = $("#items-table-body tr").length;
    roinc++
  $('#items-table-body').append(


  `
  <tr id='addr0${roinc}'>
    <td class = 'nnum' style="text-align: center;">${roinc}</td>
                    <td style="width: 20%;">
                      <div class="d-flex">
                        <select name='items[]' id="product${roinc}" class="form-control product" style="background-color: #43596c; color: white;" onchange="changeprd(this.id)">
                            <option value=" " selected hidden>Select Product</option>
                            <option id="new_itm1"></option>
                            {% for i in item %}
                                {% if i.cid_id == cmp1.cid %}
                                    <option  value="{{ i.name  }}">{{ i.name  }} </option>
                                {% endif %}
                            {% endfor %}
                               
                        </select>

                            <a href="#">
                                <button type="button" class="btn btn-outline-secondary ml-1" 
                                data-target="#newitem" data-toggle="modal">+</button>
                            </a>
                        </div>
                    </td>
                    <td><input type="text" name='hsn[]' id="hsn${roinc}" placeholder='Enter HSN Code' class="form-control" style="background-color: #43596c; color: white;" readonly /></td>
                     <td><input type="number" name='quantity[]' value=0 id="qty${roinc}" class="form-control qty mb-1" step=0 min=0 style="background-color: #43596c;margin-top: 21px; color: white;" onchange="changeqty(this.id)" />
                        <input type="text" id="avl${roinc}" style="display: none;">
                        <div class='d-flex'><span>Available Qty :</span> <span id="qtyspan${roinc}"class=''></span></div>
                    </td>
                    <td><input type="number" name='rate[]' id="unit${roinc}" value=0 class="form-control price" step="0.00" min="0" style="background-color: #43596c; color: white;" readonly/></td>
                    <td style='width:13%;'>
                      <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex">

                      <select name='tax[]' id="tax1${roinc}" class="form-control tax intra_tax d-none" onchange="taxchange(this.id)">
                          <option selected disabled hidden> Select GST</option>
                          <option value=28 >28.0% GST</option>
                          <option value=18 >18.0% GST</option>
                          <option value=12  >12.0% GST</option>
                              <option value=5  >05.0% GST</option>
                          <option value=3  >03.0% GST</option>
                              <option value=0  >0.0% GST</option>
                      </select>
                      <select name='tax[]' id="tax2${roinc}" class="form-control tax inter_tax d-none" onchange="taxchange(this.id)">
                          <option selected disabled hidden >Select IGST</option>
                          <option value=28 >28.0% IGST</option>
                          <option value=18 >18.0% IGST</option>
                          <option value=12  >12.0% IGST</option>
                              <option value=5  >05.0% IGST</option>
                          <option value=3  >03.0% IGST</option>
                              <option value=0  >0.0% IGST</option>
                      </select>
                      <input type="text" style="display: none;" id="tax_percent${roinc}">
                      <div class="mt-1" style=" text-align: center;color: red;" ><span id="invalidtax${roinc}" style="display: none;"> Invalid Tax %</span> </div> 
                    </td>  
                    <td>
                      <input type="number" name='reduce[]' placeholder='Enter Discount' value=0 id="disc${roinc}" class="form-control disc" step=0 min=0>
                    </td>
                    <td><input type="number" name='amount[]' id="total${roinc}" placeholder=0 class="form-control total" value=0 step="any" readonly style="background-color: #43596c; color: white;" readonly /></td>
                    <td style="display: none;"><input type="number" step="any" name='taxamount1' id="taxamount${roinc}" class="form-control taxamount" />
                    </td>
                    <td>
                      <button type="button" id="${roinc}" class="btn  font-weight-bold clone_row fa fa-clone px-2 py-1 my-1" style="background-color:rgb(88, 107, 143);"></button><br>
                      <button type="button" id="${roinc}" class="btn btn-danger px-2 mx-1 py-1 remove_row fa fa-close"></button>
                    </td>
                  </tr>
  
  `
    
 
 );
  });
  });
  $(document).on('click','.remove_row',function(){
            var row_id = $(this).attr("id");
            $('#addr0'+row_id+'').remove();
            calc();
        });

        $(document).on('click','.clone_row',function(){
                var roinc = $("#items-table-body tr").length;
                var originalRow = $(this).closest('#items-table-body tr'); 
                var clonedRow = originalRow.clone();

                clonedRow.attr('id', 'addr0' +(roinc+1));

                clonedRow.find('.nnum').text(roinc+1);

                clonedRow.find('[id]').each(function() {
                    var oldId = $(this).attr('id');
                    var newId = oldId.replace(/\d+/, roinc+1);
                    console.log(newId)
                    $(this).attr('id', newId );
                });

                clonedRow.find('.product').each(function() {
                    $(this).val(originalRow.find('.product').val());
                });
                clonedRow.find('.intra_tax').each(function() {
                    $(this).val(originalRow.find('.intra_tax').val());
                });
                clonedRow.find('.inter_tax').each(function() {
                    $(this).val(originalRow.find('.inter_tax').val());
                });
                originalRow.after(clonedRow);
                
                calc();
                
            });
            $(document).ready(function(){

            
            $('#items-table-body').on('keyup change', function () {
                calc();
            });

            $('#tax').on('keyup change', function () {
                calc_total();
            });
            });

        function calc() {
        $('#tab_logic tbody tr').each(function () {
            var html = $(this).html();
            if (html != '') {
                var qty = $(this).find('.qty').val();
                
                var price = $(this).find('.price').val();
            
                var dis = $(this).find('.disc').val();
                var bc = $("#plosu").val();
                var compstate = $("#cmpstate").val();
                if(bc==compstate){
                    tax = $(this).find('.intra_tax').val();
                }
                else{
                    tax = $(this).find('.inter_tax').val();
                }
                $(this).find('.total').val((parseFloat(qty) *parseFloat(price))-parseFloat(dis));
                $(this).find('.taxamount').val(((qty * price)-dis) * (tax / 100));
                calc_total();
            }
        });
        }
        function calc_total() {
            total = 0;
            $('.total').each(function() {
                total += parseFloat($(this).val());
            });

            taxamount = 0.0;
            $('.taxamount').each(function() {
                taxamount += parseFloat($(this).val());
            });

            total_discount = 0.0;
            $('.reduce').each(function() {
                total_discount += parseFloat($(this).val());
            });

            $('#subtotal').val(parseFloat(total.toFixed(2)));
            $('#tax_amount').val(parseFloat(taxamount.toFixed(2)));
            $('#tot_dis').val(parseFloat(total_discount.toFixed(2)));
        
            calc_tcs();
        }
        function calc_tcs() {
            tcsamount = 0;
            var a = document.getElementById("tcs1").value
            var discount = document.getElementById("disc1").value
            var shipCharge = parseFloat(document.getElementById("shipcharge").value); // Getting the shipping charge amount
            var adjustments = parseFloat(document.getElementById("round_off").value);

            tcs=0
            tcs =a/100 * total
            let z=Math.round(tcs)
            disc0=discount
            
            var amount =taxamount + total - tcs 
            let x =Math.round(amount)
            let y =Math.round(x-disc0 + shipCharge)
            var gt = Math.round(amount-disc0+ shipCharge + adjustments);
            gtot = taxamount + total + shipCharge+adjustments;
            $('#grandtotal').val(gtot.toFixed(2));
            $('#tcs_amount').val(parseFloat(tcs.toFixed(2)));
            // $('#grandtotal').val(parseFloat(gt.toFixed(2)));
            $('#due').val(parseFloat(y.toFixed(2)));
            // $('#round_off').val(parseFloat(y.toFixed(2)));
            // $('#grandtotal').val((y).toFixed(2));
            // $('#due').val((y).toFixed(2));
            // $('#round_off').val((y).toFixed(2));  
            
            test()
        }
        function test(){
            var bc = document.getElementById("plosu").value
            d=0
            if (bc == "{{ cmp1.state }}"  ) {
                gst = taxamount/2
                $('#cgst').val(parseFloat(gst.toFixed(2)));
                $('#sgst').val(parseFloat(gst.toFixed(2)));
                $('#igst').val(parseFloat(d.toFixed(2)));
            }
                
            if (bc != "{{ cmp1.state }}"  ) {
                $('#igst').val(taxamount.toFixed(2));
                $('#cgst').val(d.toFixed(2));
                $('#sgst').val(d.toFixed(2));
            }
        }

$(document).on('change', '.product',function(){ 
    
    var n = $(this).attr("id").slice(7);
    $.ajax({
    url: "{% url 'itemdata' %}",
    type : 'GET',
    data:{
        id : $(this).val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        },
    
    success: function(response) {
        data = response.hsn
        data2 = response.qty
        data3 = response.price
        data4 = response.gst
        data5 = response.sgst

        // console.log(data)
        // console.log(data2)
        // console.log(data3)
        document.getElementById('hsn'+n).value = data;
        document.getElementById('avl'+n).innerHTML = data2;
        document.getElementById('qtyspan'+n).innerHTML = data2;
        document.getElementById('unit'+n).value = data3;
        var bc = document.getElementById("plosu").value;
        var compstate = document.getElementById("cmpstate").value;
        if (bc == compstate ) {
            $(".seltax").removeClass('d-flex');
            $(".seltax").addClass('d-none');
            $(".inter_tax").removeClass('d-flex');
            $(".inter_tax").addClass('d-none');
            $(".intra_tax").removeClass('d-none');
            $(".intra_tax").addClass('d-flex');
            if (data4 != ' '){
                document.getElementById('tax1'+n).value = data4;
                document.getElementById('tax_percent'+n).value = data4;
            }else{
                document.getElementById('tax1'+n).value = 0;
                document.getElementById('tax_percent'+n).value = 0;
            }
            
            
            
        } else {
            $(".seltax").removeClass('d-flex');
            $(".seltax").addClass('d-none');
            $(".intra_tax").removeClass('d-flex');
            $(".intra_tax").addClass('d-none');
            $(".inter_tax").removeClass('d-none');
            $(".inter_tax").addClass('d-flex');
            if(data5 != ' '){
                document.getElementById('tax2'+n).value = data5;
                document.getElementById('tax_percent'+n).value = data5;
            }else{
                document.getElementById('tax2'+n).value = 0;
                document.getElementById('tax_percent'+n).value = 0;
            }

        }
    },
    });
    

});
</script>
<script>
    $(document).ready(function(){
        $("#tab_logic").on('click', '.demo', function() {
            var currentRow = $(this).closest("tr");
            var col1=currentRow.find("td:eq(2)").text();
            alert(col1);
        });
    });
</script>

<script>
    document.getElementById("shipcharge").addEventListener("input", function() {
    calc_tcs(); // Recalculate the values when shipCharge changes
    });
    
</script>

<script>
    document.getElementById("round_off").addEventListener("input", function() {
    calc(); // Recalculate the values when adjustments changes
    });
</script>

<script>
    const grandTotalInput = document.getElementById("grandtotal");
    const paidInput = document.getElementById("paid");
    const balanceDueInput = document.getElementById("bal_due");
    const paidCheckbox = document.getElementById("invalidCheck");
    

    paidCheckbox.addEventListener("change", function () {
        if (paidCheckbox.checked) {
            paidInput.value = grandTotalInput.value;
        } else {
            paidInput.value = "";
        }
        calculateBalance();
    });

    paidInput.addEventListener("input", calculateBalance);

    function calculateBalance() {
        const grandTotal = parseFloat(grandTotalInput.value);
        const paidAmount = parseFloat(paidInput.value);

        if (paidAmount > grandTotal) {
            alert("Paid amount cannot be greater than Grand Total.");
            paidInput.value = grandTotal;
            
            
        
        }
        const paidAmount1 = parseFloat(paidInput.value);
        const balanceDue = grandTotal - paidAmount1;
        balanceDueInput.value = balanceDue.toFixed(2);
    }

    grandTotalInput.addEventListener("input", function () {
        if (paidCheckbox.checked) {
            paidInput.value = grandTotalInput.value;
            calculateBalance();
        }
    });

    paidInput.addEventListener("focus", function () {
        paidCheckbox.checked = true;
    });

    paidInput.addEventListener("blur", function () {
        if (paidInput.value === "") {
            paidCheckbox.checked = false;
        }
        
    });
</script>
<script>
    function changeqty(id){
        id_val = id.slice(3)
        qty = document.getElementById(id).value
        avl_val = document.getElementById(`avl${id_val}`).innerText
        document.getElementById(`qtyspan${id_val}`).textContent = parseInt(avl_val) + parseInt(qty)
    }
</script>

<script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>    
<script>
    function insertValue() {
        var select = document.getElementById("select"),
        txtVal = document.getElementById("val").value,
        newOption = document.createElement("OPTION"),
        newOptionval = document.createTextNode(txtVal);
        newOption.appendChild(newOptionval);
        select.insertBefore(newOption, select.lastChild);
    }
    
    $('.datepicker').pickadate({
        selectMonths: true,
        selectYears: true
    }),
    $('.timepicker').pickatime()
    
    $(function () {
        $('#date-time').bootstrapMaterialDatePicker({
            format: 'YYYY-MM-DD HH:mm'
        });
        $('#date').bootstrapMaterialDatePicker({
            time: false
        });
        $('#time').bootstrapMaterialDatePicker({
            date: false,
            format: 'HH:mm'
        });
    });
    
    $(document).ready(function () {
        var current_fs, next_fs, previous_fs; //fieldsets
        var opacity;
        $(".next").click(function () {
            current_fs = $(this).parent();
            next_fs = $(this).parent().next();

            $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
            next_fs.show();
            current_fs.animate({opacity: 0}, {
                step: function (now) {
                    opacity = 1 - now;
                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    next_fs.css({'opacity': opacity});
                },
                duration: 600
            });
        });
        $(".previous").click(function () {
            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();
            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
            previous_fs.show();
            current_fs.animate({opacity: 0}, {
                step: function (now) {
                    opacity = 1 - now;
                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    previous_fs.css({'opacity': opacity});
                },
                duration: 600
            });
        });

        $('.radio-group .radio').click(function () {
            $(this).parent().find('.radio').removeClass('selected');
            $(this).addClass('selected');
        });
    });

    function ShowHideDiv(track) {
            var inventorytrack = document.getElementById("inventorytrack");
            inventorytrack.style.display = track.checked ? "flex" : "none";

        } 
    </script>

<script type="text/javascript">
    $('.porder').click(function(e){
        var result = confirm("Are you created purchase order number manually or user preference");

        if(!result) {
            e.preventDefault();
        }
    });
</script>
<script>
    $(document).ready(function() {

        // Function to update tax options based on the place of supply
        function updateTaxOptions() {
            var placeOfSupply = $('#plosu').val();
            var gstOptions = `
                <option value="0" hidden>Select</option>
                <option value=0>00 % GST(00%)</option>
                <option value=3>03 % GST(03%)</option>
                <option value=5>05 % GST(05%)</option>
                <option value=12>12 % GST(12%)</option>
                <option value=18>18 % GST(18%)</option>
                <option value=28>28 % GST(28%)</option>`;
            var igstOptions = `
                <option value="0" hidden>Select</option>
                <option value=0>00 % IGST(00%)</option>
                <option value=3>03 % IGST(03%)</option>
                <option value=5>05 % IGST(05%)</option>
                <option value=12>12 % IGST(12%)</option>
                <option value=18>18 % IGST(18%)</option>
                <option value=28>28 % IGST(28%)</option>`;
                

            // Determine which tax options to use based on the place of supply
            var selectedOptions = (placeOfSupply === '{{ cmp1.state }}') ? gstOptions : igstOptions;

            // Update tax options for the all rows class
            $('.tax').html(selectedOptions);
        }

        // Bind an event listener to the "Place of Supply" element
        $('#plosu').on('change', function() {
            updateTaxOptions();
            calc();
        });

    
    });

</script>

    
{% endblock %}